{"version":3,"file":"trois.module.min.js","sources":["../src/tools.ts","../src/core/useRaycaster.ts","../src/core/usePointer.ts","../src/core/useThree.ts","../src/core/Renderer.ts","../src/core/Camera.ts","../src/core/OrthographicCamera.ts","../src/core/PerspectiveCamera.ts","../src/core/Scene.ts","../src/core/Object3D.ts","../src/core/Group.ts","../src/core/Raycaster.ts","../src/core/CubeCamera.ts","../src/meshes/Mesh.ts","../src/geometries/Geometry.ts","../src/geometries/BoxGeometry.ts","../src/geometries/CircleGeometry.ts","../src/geometries/ConeGeometry.ts","../src/geometries/CylinderGeometry.ts","../src/geometries/DodecahedronGeometry.ts","../src/geometries/ExtrudeGeometry.ts","../src/geometries/IcosahedronGeometry.ts","../src/geometries/LatheGeometry.ts","../src/geometries/OctahedronGeometry.ts","../src/geometries/PlaneGeometry.ts","../src/geometries/PolyhedronGeometry.ts","../src/geometries/RingGeometry.ts","../src/geometries/SphereGeometry.ts","../src/geometries/ShapeGeometry.ts","../src/geometries/TetrahedronGeometry.ts","../src/geometries/TorusGeometry.ts","../src/geometries/TorusKnotGeometry.ts","../src/geometries/TubeGeometry.ts","../src/lights/Light.ts","../src/lights/AmbientLight.ts","../src/lights/DirectionalLight.ts","../src/lights/HemisphereLight.ts","../src/lights/PointLight.ts","../src/lights/RectAreaLight.ts","../src/lights/SpotLight.ts","../src/materials/Material.ts","../src/materials/MatcapMaterial.ts","../src/materials/ShaderMaterial.ts","../src/materials/SubsurfaceScatteringShader.ts","../src/materials/SubSurfaceMaterial.ts","../src/materials/Texture.ts","../src/materials/CubeTexture.ts","../src/materials/VideoTexture.ts","../src/meshes/Box.ts","../src/meshes/Circle.ts","../src/meshes/Cone.ts","../src/meshes/Cylinder.ts","../src/meshes/Dodecahedron.ts","../src/meshes/Icosahedron.ts","../src/meshes/Lathe.ts","../src/meshes/Octahedron.ts","../src/meshes/Plane.ts","../src/meshes/Polyhedron.ts","../src/meshes/Ring.ts","../src/meshes/Sphere.ts","../src/meshes/Tetrahedron.ts","../src/meshes/Text.ts","../src/meshes/Torus.ts","../src/meshes/TorusKnot.ts","../src/meshes/Tube.ts","../src/meshes/Image.ts","../src/meshes/InstancedMesh.ts","../src/meshes/Sprite.ts","../src/meshes/Points.ts","../src/models/Model.ts","../src/models/GLTF.ts","../src/models/FBX.ts","../src/effects/EffectComposer.ts","../src/effects/EffectPass.ts","../src/effects/RenderPass.ts","../src/effects/BokehPass.ts","../src/effects/FilmPass.ts","../src/effects/FXAAPass.ts","../src/effects/HalftonePass.ts","../src/effects/SMAAPass.ts","../src/effects/SSAOPass.ts","../src/shaders/default.ts","../src/shaders/TiltShift.ts","../src/effects/TiltShiftPass.ts","../src/effects/UnrealBloomPass.ts","../src/shaders/ZoomBlur.ts","../src/effects/ZoomBlurPass.ts","../src/plugin.ts","../src/use/useTextures.ts"],"sourcesContent":["import { ref, toRef, watch, WatchStopHandle } from 'vue'\r\n\r\ntype OptionSetter = (dst: any, key: string, value: any) => void\r\n\r\nexport function applyObjectProps(\r\n  dst: any,\r\n  options: Record<string, unknown>,\r\n  setter?: OptionSetter\r\n): void {\r\n  if (options instanceof Object) {\r\n    Object.entries(options).forEach(([key, value]) => {\r\n      if (setter) setter(dst, key, value)\r\n      else dst[key] = value\r\n    })\r\n  }\r\n}\r\n\r\nexport function bindObjectProp(\r\n  src: any,\r\n  prop: string,\r\n  dst: any,\r\n  apply = true,\r\n  setter?: OptionSetter\r\n): WatchStopHandle {\r\n  if (apply) applyObjectProps(dst, src[prop], setter)\r\n  const r = toRef(src, prop)\r\n  return watch(r, (value) => { applyObjectProps(dst, value, setter) })\r\n}\r\n\r\nexport function bindObjectProps(\r\n  src: any,\r\n  dst: any,\r\n  apply = true,\r\n  setter?: OptionSetter\r\n): WatchStopHandle {\r\n  if (apply) applyObjectProps(dst, src, setter)\r\n  const r = ref(src)\r\n  return watch(r, (value) => { applyObjectProps(dst, value, setter) }, { deep: true })\r\n}\r\n\r\nexport function setFromProp(o: Record<string, unknown>, prop: Record<string, unknown>): void {\r\n  if (prop instanceof Object) {\r\n    Object.entries(prop).forEach(([key, value]) => {\r\n      o[key] = value\r\n    })\r\n  }\r\n}\r\n\r\nexport function bindProps(src: any, props: string[], dst: any): void {\r\n  props.forEach(prop => {\r\n    bindProp(src, prop, dst, prop)\r\n  })\r\n}\r\n\r\nexport function bindProp(src: any, srcProp: string, dst: any, dstProp?: string): void {\r\n  const _dstProp = dstProp || srcProp\r\n  const ref = toRef(src, srcProp)\r\n  if (ref.value instanceof Object) {\r\n    setFromProp(dst[_dstProp], ref.value)\r\n    watch(ref, (value) => { setFromProp(dst[_dstProp], value) }, { deep: true })\r\n  } else {\r\n    if (ref.value !== undefined) dst[_dstProp] = src[srcProp]\r\n    watch(ref, (value) => { dst[_dstProp] = value })\r\n  }\r\n}\r\n\r\nexport function propsValues(props: Record<string, unknown>, exclude: string[] = []): Record<string, unknown> {\r\n  const values: Record<string, unknown> = {}\r\n  Object.entries(props).forEach(([key, value]) => {\r\n    if (!exclude || !exclude.includes(key)) {\r\n      values[key] = value\r\n    }\r\n  })\r\n  return values\r\n}\r\n\r\nexport function lerp(value1: number, value2: number, amount: number): number {\r\n  amount = amount < 0 ? 0 : amount\r\n  amount = amount > 1 ? 1 : amount\r\n  return value1 + (value2 - value1) * amount\r\n}\r\n\r\nexport function limit(val: number, min: number, max: number): number {\r\n  return val < min ? min : (val > max ? max : val)\r\n}\r\n\r\n// from https://github.com/pmndrs/drei/blob/master/src/useMatcapTexture.tsx\r\nconst MATCAP_ROOT = 'https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d'\r\nconst DEFAULT_MATCAP = '0404E8_0404B5_0404CB_3333FC'\r\n\r\nexport function getMatcapUrl(hash = DEFAULT_MATCAP, format = 1024): string {\r\n  const fileName = `${hash}${getMatcapFormatString(format)}.png`\r\n  return `${MATCAP_ROOT}/${format}/${fileName}`\r\n}\r\n\r\nfunction getMatcapFormatString(format: number) {\r\n  switch (format) {\r\n    case 64:\r\n      return '-64px'\r\n    case 128:\r\n      return '-128px'\r\n    case 256:\r\n      return '-256px'\r\n    case 512:\r\n      return '-512px'\r\n    default:\r\n      return ''\r\n  }\r\n}\r\n","import { Camera, Intersection, Object3D, Plane, Raycaster, Vector2, Vector3 } from 'three'\r\n\r\nexport interface RaycasterInterface {\r\n  position: Vector3\r\n  updatePosition(coords: Vector2): void\r\n  intersect(coords: Vector2, objects: Object3D[], recursive?: boolean): Intersection[],\r\n}\r\n\r\nexport interface RaycasterConfigInterface {\r\n  camera: Camera\r\n  resetPosition?: Vector3\r\n}\r\n\r\nexport default function useRaycaster(options: RaycasterConfigInterface): RaycasterInterface {\r\n  const {\r\n    camera,\r\n    resetPosition = new Vector3(0, 0, 0),\r\n  } = options\r\n\r\n  const raycaster = new Raycaster()\r\n  const position = resetPosition.clone()\r\n  const plane = new Plane(new Vector3(0, 0, 1), 0)\r\n\r\n  const updatePosition = (coords: Vector2) => {\r\n    raycaster.setFromCamera(coords, camera)\r\n    camera.getWorldDirection(plane.normal)\r\n    raycaster.ray.intersectPlane(plane, position)\r\n  }\r\n\r\n  const intersect = (coords: Vector2, objects: Object3D[], recursive = false) => {\r\n    raycaster.setFromCamera(coords, camera)\r\n    return raycaster.intersectObjects(objects, recursive)\r\n  }\r\n\r\n  return {\r\n    position,\r\n    updatePosition,\r\n    intersect,\r\n  }\r\n}\r\n","/* eslint-disable @typescript-eslint/no-empty-function */\r\nimport { Camera, InstancedMesh, Intersection, Object3D, Vector2, Vector3 } from 'three'\r\nimport useRaycaster from './useRaycaster'\r\n\r\nexport interface PointerEventInterface {\r\n  type: 'pointerenter' | 'pointermove' | 'pointerleave' | 'click'\r\n  position?: Vector2\r\n  positionN?: Vector2\r\n  positionV3?: Vector3\r\n}\r\n\r\nexport interface PointerIntersectEventInterface {\r\n  type: 'pointerenter' | 'pointerover' | 'pointermove' | 'pointerleave' | 'click'\r\n  component: any\r\n  over?: boolean\r\n  intersect?: Intersection\r\n}\r\n\r\nexport type PointerCallbackType = (e: PointerEventInterface) => void\r\nexport type PointerIntersectCallbackType = (e: PointerIntersectEventInterface) => void\r\n\r\nexport interface PointerPublicConfigInterface {\r\n  intersectMode?: 'frame'\r\n  intersectRecursive?: boolean\r\n  touch?: boolean\r\n  resetOnEnd?: boolean\r\n  onEnter?: PointerCallbackType\r\n  onMove?: PointerCallbackType\r\n  onLeave?: PointerCallbackType\r\n  onClick?: PointerCallbackType\r\n  onIntersectEnter?: PointerIntersectCallbackType\r\n  onIntersectOver?: PointerIntersectCallbackType\r\n  onIntersectMove?: PointerIntersectCallbackType\r\n  onIntersectLeave?: PointerIntersectCallbackType\r\n  onIntersectClick?: PointerIntersectCallbackType\r\n}\r\n\r\nexport interface PointerConfigInterface extends PointerPublicConfigInterface {\r\n  camera: Camera\r\n  domElement: HTMLCanvasElement\r\n  intersectObjects: Object3D[] | (() => Object3D[])\r\n}\r\n\r\nexport interface PointerInterface {\r\n  position: Vector2\r\n  positionN: Vector2\r\n  positionV3: Vector3\r\n  intersectObjects: Object3D[] | (() => Object3D[])\r\n  listeners: boolean\r\n  addListeners(cb: void): void\r\n  removeListeners(cb: void): void\r\n  intersect(): void\r\n}\r\n\r\nexport default function usePointer(options: PointerConfigInterface): PointerInterface {\r\n  const {\r\n    camera,\r\n    domElement,\r\n    intersectObjects,\r\n    intersectRecursive = false,\r\n    touch = true,\r\n    resetOnEnd = false,\r\n    onEnter = () => {},\r\n    onMove = () => {},\r\n    onLeave = () => {},\r\n    onClick = () => {},\r\n    onIntersectEnter = () => {},\r\n    onIntersectOver = () => {},\r\n    onIntersectMove = () => {},\r\n    onIntersectLeave = () => {},\r\n    onIntersectClick = () => {},\r\n  } = options\r\n\r\n  const position = new Vector2(0, 0)\r\n  const positionN = new Vector2(0, 0)\r\n\r\n  const raycaster = useRaycaster({ camera })\r\n  const positionV3 = raycaster.position\r\n\r\n  const obj: PointerInterface = {\r\n    position,\r\n    positionN,\r\n    positionV3,\r\n    intersectObjects,\r\n    listeners: false,\r\n    addListeners,\r\n    removeListeners,\r\n    intersect,\r\n  }\r\n\r\n  return obj\r\n\r\n  function reset() {\r\n    position.set(0, 0)\r\n    positionN.set(0, 0)\r\n    positionV3.set(0, 0, 0)\r\n  }\r\n\r\n  function updatePosition(event: TouchEvent | MouseEvent) {\r\n    let x, y\r\n    // @ts-ignore\r\n    if (event.touches && event.touches.length > 0) {\r\n      x = (<TouchEvent>event).touches[0].clientX\r\n      y = (<TouchEvent>event).touches[0].clientY\r\n    } else {\r\n      x = (<MouseEvent>event).clientX\r\n      y = (<MouseEvent>event).clientY\r\n    }\r\n\r\n    const rect = domElement.getBoundingClientRect()\r\n    position.x = x - rect.left\r\n    position.y = y - rect.top\r\n    positionN.x = (position.x / rect.width) * 2 - 1\r\n    positionN.y = -(position.y / rect.height) * 2 + 1\r\n    raycaster.updatePosition(positionN)\r\n  }\r\n\r\n  function intersect() {\r\n    const _intersectObjects = getIntersectObjects()\r\n    if (_intersectObjects.length) {\r\n      const intersects = raycaster.intersect(positionN, _intersectObjects, intersectRecursive)\r\n      const offObjects: Object3D[] = [..._intersectObjects]\r\n      const iMeshes: InstancedMesh[] = []\r\n\r\n      intersects.forEach(intersect => {\r\n        const { object } = intersect\r\n        const component = getComponent(object)\r\n\r\n        // only once for InstancedMesh\r\n        if (object instanceof InstancedMesh) {\r\n          if (iMeshes.indexOf(object) !== -1) return\r\n          iMeshes.push(object)\r\n        }\r\n\r\n        if (!object.userData.over) {\r\n          object.userData.over = true\r\n          const overEvent: PointerIntersectEventInterface = { type: 'pointerover', over: true, component, intersect }\r\n          const enterEvent: PointerIntersectEventInterface = { ...overEvent, type: 'pointerenter' }\r\n          onIntersectOver(overEvent)\r\n          onIntersectEnter(enterEvent)\r\n          component?.onPointerOver?.(overEvent)\r\n          component?.onPointerEnter?.(enterEvent)\r\n        }\r\n\r\n        const moveEvent: PointerIntersectEventInterface = { type: 'pointermove', component, intersect }\r\n        onIntersectMove(moveEvent)\r\n        component?.onPointerMove?.(moveEvent)\r\n\r\n        offObjects.splice(offObjects.indexOf((<Object3D>object)), 1)\r\n      })\r\n\r\n      offObjects.forEach(object => {\r\n        const component = getComponent(object)\r\n        if (object.userData.over) {\r\n          object.userData.over = false\r\n          const overEvent: PointerIntersectEventInterface = { type: 'pointerover', over: false, component }\r\n          const leaveEvent: PointerIntersectEventInterface = { ...overEvent, type: 'pointerleave' }\r\n          onIntersectOver(overEvent)\r\n          onIntersectLeave(leaveEvent)\r\n          component?.onPointerOver?.(overEvent)\r\n          component?.onPointerLeave?.(leaveEvent)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  function pointerEnter(event: TouchEvent | MouseEvent) {\r\n    updatePosition(event)\r\n    onEnter({ type: 'pointerenter', position, positionN, positionV3 })\r\n  }\r\n\r\n  function pointerMove(event: TouchEvent | MouseEvent) {\r\n    updatePosition(event)\r\n    onMove({ type: 'pointermove', position, positionN, positionV3 })\r\n    intersect()\r\n  }\r\n\r\n  function pointerClick(event: TouchEvent | MouseEvent) {\r\n    updatePosition(event)\r\n    const _intersectObjects = getIntersectObjects()\r\n    if (_intersectObjects.length) {\r\n      const intersects = raycaster.intersect(positionN, _intersectObjects, intersectRecursive)\r\n      const iMeshes: InstancedMesh[] = []\r\n      intersects.forEach(intersect => {\r\n        const { object } = intersect\r\n        const component = getComponent(object)\r\n\r\n        // only once for InstancedMesh\r\n        if (object instanceof InstancedMesh) {\r\n          if (iMeshes.indexOf(object) !== -1) return\r\n          iMeshes.push(object)\r\n        }\r\n\r\n        const event: PointerIntersectEventInterface = { type: 'click', component, intersect }\r\n        onIntersectClick(event)\r\n        component?.onClick?.(event)\r\n      })\r\n    }\r\n    onClick({ type: 'click', position, positionN, positionV3 })\r\n  }\r\n\r\n  function pointerLeave() {\r\n    if (resetOnEnd) reset()\r\n    onLeave({ type: 'pointerleave' })\r\n  }\r\n\r\n  function getComponent(object: Object3D) {\r\n    if (object.userData.component) return object.userData.component\r\n\r\n    let parent = object.parent\r\n    while (parent) {\r\n      if (parent.userData.component) {\r\n        return parent.userData.component\r\n      }\r\n      parent = parent.parent\r\n    }\r\n\r\n    return undefined\r\n  }\r\n\r\n  function getIntersectObjects() {\r\n    if (typeof intersectObjects === 'function') {\r\n      return intersectObjects()\r\n    } else return intersectObjects\r\n  }\r\n\r\n  function addListeners() {\r\n    domElement.addEventListener('mouseenter', pointerEnter)\r\n    domElement.addEventListener('mousemove', pointerMove)\r\n    domElement.addEventListener('mouseleave', pointerLeave)\r\n    domElement.addEventListener('click', pointerClick)\r\n    if (touch) {\r\n      domElement.addEventListener('touchstart', pointerEnter)\r\n      domElement.addEventListener('touchmove', pointerMove)\r\n      domElement.addEventListener('touchend', pointerLeave)\r\n    }\r\n    obj.listeners = true\r\n  }\r\n\r\n  function removeListeners() {\r\n    domElement.removeEventListener('mouseenter', pointerEnter)\r\n    domElement.removeEventListener('mousemove', pointerMove)\r\n    domElement.removeEventListener('mouseleave', pointerLeave)\r\n    domElement.removeEventListener('click', pointerClick)\r\n\r\n    domElement.removeEventListener('touchstart', pointerEnter)\r\n    domElement.removeEventListener('touchmove', pointerMove)\r\n    domElement.removeEventListener('touchend', pointerLeave)\r\n    obj.listeners = false\r\n  }\r\n}\r\n","import { Camera, Object3D, OrthographicCamera, PerspectiveCamera, Scene, WebGLRenderer, WebGLRendererParameters } from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js'\r\nimport usePointer, { PointerConfigInterface, PointerPublicConfigInterface, PointerInterface } from './usePointer'\r\n\r\nexport interface SizeInterface {\r\n  width: number\r\n  height: number\r\n  wWidth: number\r\n  wHeight: number\r\n  ratio: number\r\n}\r\n\r\nexport interface ThreeConfigInterface {\r\n  params?: WebGLRendererParameters\r\n  canvas?: HTMLCanvasElement\r\n  antialias: boolean\r\n  alpha: boolean\r\n  autoClear: boolean\r\n  orbitCtrl: boolean | Record<string, unknown>\r\n  pointer: boolean | PointerPublicConfigInterface\r\n  resize: boolean | string\r\n  width?: number\r\n  height?: number\r\n  onResize?(size: SizeInterface): void\r\n  [index:string]: any\r\n}\r\n\r\nexport interface ThreeInterface {\r\n  config: ThreeConfigInterface\r\n  renderer: WebGLRenderer\r\n  composer?: EffectComposer\r\n  camera?: Camera\r\n  cameraCtrl?: OrbitControls\r\n  scene?: Scene\r\n  pointer?: PointerInterface\r\n  size: SizeInterface\r\n  init(): boolean\r\n  dispose(): void\r\n  render(): void\r\n  renderC(): void\r\n  setSize(width: number, height: number): void\r\n  addIntersectObject(o: Object3D): void\r\n  removeIntersectObject(o: Object3D): void\r\n}\r\n\r\n/**\r\n * Three.js helper\r\n */\r\nexport default function useThree(params: ThreeConfigInterface): ThreeInterface {\r\n  // default config\r\n  const config: ThreeConfigInterface = {\r\n    antialias: true,\r\n    alpha: false,\r\n    autoClear: true,\r\n    orbitCtrl: false,\r\n    pointer: false,\r\n    resize: false,\r\n    width: 300,\r\n    height: 150,\r\n  }\r\n\r\n  if (params) {\r\n    Object.entries(params).forEach(([key, value]) => {\r\n      config[key] = value\r\n    })\r\n  }\r\n\r\n  // size\r\n  const size: SizeInterface = {\r\n    width: 1, height: 1,\r\n    wWidth: 1, wHeight: 1,\r\n    ratio: 1,\r\n  }\r\n\r\n  const beforeRenderCallbacks: {(): void}[] = []\r\n\r\n  const intersectObjects: Object3D[] = []\r\n\r\n  const renderer = createRenderer()\r\n\r\n  // returned object\r\n  const obj: ThreeInterface = {\r\n    config,\r\n    renderer,\r\n    size,\r\n    init,\r\n    dispose,\r\n    render,\r\n    renderC,\r\n    setSize,\r\n    addIntersectObject, removeIntersectObject,\r\n  }\r\n\r\n  return obj\r\n\r\n  /**\r\n   * create WebGLRenderer\r\n   */\r\n  function createRenderer(): WebGLRenderer {\r\n    const renderer = new WebGLRenderer({ canvas: config.canvas, antialias: config.antialias, alpha: config.alpha, ...config.params })\r\n    renderer.autoClear = config.autoClear\r\n    return renderer\r\n  }\r\n\r\n  /**\r\n   * init three\r\n   */\r\n  function init() {\r\n    if (!obj.scene) {\r\n      console.error('Missing Scene')\r\n      return false\r\n    }\r\n\r\n    if (!obj.camera) {\r\n      console.error('Missing Camera')\r\n      return false\r\n    }\r\n\r\n    if (config.resize) {\r\n      onResize()\r\n      window.addEventListener('resize', onResize)\r\n    } else if (config.width && config.height) {\r\n      setSize(config.width, config.height)\r\n    }\r\n\r\n    initPointer()\r\n\r\n    if (config.orbitCtrl) {\r\n      const cameraCtrl = new OrbitControls(obj.camera, obj.renderer.domElement)\r\n      if (config.orbitCtrl instanceof Object) {\r\n        Object.entries(config.orbitCtrl).forEach(([key, value]) => {\r\n          // @ts-ignore\r\n          cameraCtrl[key] = value\r\n        })\r\n      }\r\n      onBeforeRender(() => { cameraCtrl.update() })\r\n      obj.cameraCtrl = cameraCtrl\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * init pointer\r\n   */\r\n  function initPointer() {\r\n    let pointerConf: PointerConfigInterface = {\r\n      camera: obj.camera!,\r\n      domElement: obj.renderer!.domElement,\r\n      intersectObjects,\r\n    }\r\n\r\n    if (config.pointer && config.pointer instanceof Object) {\r\n      pointerConf = { ...pointerConf, ...config.pointer }\r\n    }\r\n\r\n    const pointer = obj.pointer = usePointer(pointerConf)\r\n    if (config.pointer || intersectObjects.length) {\r\n      pointer.addListeners()\r\n      if (pointerConf.intersectMode === 'frame') {\r\n        onBeforeRender(pointer.intersect)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * add before render callback\r\n   */\r\n  function onBeforeRender(cb: {(): void}) {\r\n    beforeRenderCallbacks.push(cb)\r\n  }\r\n\r\n  /**\r\n   * default render\r\n   */\r\n  function render() {\r\n    // if (obj.cameraCtrl) obj.cameraCtrl.update()\r\n    beforeRenderCallbacks.forEach(c => c())\r\n    obj.renderer!.render(obj.scene!, obj.camera!)\r\n  }\r\n\r\n  /**\r\n   * composer render\r\n   */\r\n  function renderC() {\r\n    // if (obj.cameraCtrl) obj.cameraCtrl.update()\r\n    beforeRenderCallbacks.forEach(c => c())\r\n    obj.composer!.render()\r\n  }\r\n\r\n  /**\r\n   * add intersect object\r\n   */\r\n  function addIntersectObject(o: Object3D) {\r\n    if (intersectObjects.indexOf(o) === -1) {\r\n      intersectObjects.push(o)\r\n    }\r\n    // add listeners if needed\r\n    if (obj.pointer && !obj.pointer.listeners) {\r\n      obj.pointer.addListeners()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * remove intersect object\r\n   */\r\n  function removeIntersectObject(o: Object3D) {\r\n    const i = intersectObjects.indexOf(o)\r\n    if (i !== -1) {\r\n      intersectObjects.splice(i, 1)\r\n    }\r\n    // remove listeners if needed\r\n    if (obj.pointer && !config.pointer && intersectObjects.length === 0) {\r\n      obj.pointer.removeListeners()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * remove listeners and dispose\r\n   */\r\n  function dispose() {\r\n    // beforeRenderCallbacks = []\r\n    window.removeEventListener('resize', onResize)\r\n    if (obj.pointer) obj.pointer.removeListeners()\r\n    if (obj.cameraCtrl) obj.cameraCtrl.dispose()\r\n    if (obj.renderer) obj.renderer.dispose()\r\n  }\r\n\r\n  /**\r\n   * resize listener\r\n   */\r\n  function onResize() {\r\n    if (config.resize === 'window') {\r\n      setSize(window.innerWidth, window.innerHeight)\r\n    } else {\r\n      const elt = obj.renderer!.domElement.parentNode as Element\r\n      if (elt) setSize(elt.clientWidth, elt.clientHeight)\r\n    }\r\n    config.onResize?.(size)\r\n  }\r\n\r\n  /**\r\n   * update renderer size and camera\r\n   */\r\n  function setSize(width: number, height: number) {\r\n    size.width = width\r\n    size.height = height\r\n    size.ratio = width / height\r\n\r\n    obj.renderer!.setSize(width, height, false)\r\n\r\n    // already done in EffectComposer\r\n    // if (obj.composer) {\r\n    //   obj.composer.setSize(width, height)\r\n    // }\r\n\r\n    const camera = (<Camera>obj.camera!)\r\n    if (camera.type === 'PerspectiveCamera') {\r\n      const pCamera = (<PerspectiveCamera>camera)\r\n      pCamera.aspect = size.ratio\r\n      pCamera.updateProjectionMatrix()\r\n    }\r\n\r\n    if (camera.type === 'OrthographicCamera') {\r\n      const oCamera = (<OrthographicCamera>camera)\r\n      size.wWidth = oCamera.right - oCamera.left\r\n      size.wHeight = oCamera.top - oCamera.bottom\r\n    } else {\r\n      const wsize = getCameraSize()\r\n      size.wWidth = wsize[0]\r\n      size.wHeight = wsize[1]\r\n    }\r\n  }\r\n\r\n  /**\r\n   * calculate camera visible area size\r\n   */\r\n  function getCameraSize() {\r\n    const camera = (<PerspectiveCamera>obj.camera!)\r\n    const vFOV = (camera.fov * Math.PI) / 180\r\n    const h = 2 * Math.tan(vFOV / 2) * Math.abs(camera.position.z)\r\n    const w = h * camera.aspect\r\n    return [w, h]\r\n  }\r\n}\r\n","/* eslint-disable no-use-before-define */\r\nimport { Camera, Scene, WebGLRenderer, WebGLRendererParameters } from 'three'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\r\nimport { ComponentPublicInstance, defineComponent, InjectionKey, PropType, watchEffect } from 'vue'\r\nimport { bindObjectProp } from '../tools'\r\nimport { PointerInterface, PointerPublicConfigInterface } from './usePointer'\r\nimport useThree, { SizeInterface, ThreeConfigInterface, ThreeInterface } from './useThree'\r\n\r\ntype CallbackType<T> = (event: T) => void\r\n\r\n// type EventType = 'init' | 'mounted' | 'beforerender' | 'afterrender' | 'resize'\r\n\r\nexport interface EventInterface {\r\n  type: 'init' | 'mounted'\r\n  renderer: RendererInterface\r\n}\r\n\r\nexport interface RenderEventInterface {\r\n  type: 'beforerender' | 'afterrender'\r\n  renderer: RendererInterface\r\n  time: number\r\n}\r\n\r\nexport interface ResizeEventInterface {\r\n  type: 'resize'\r\n  renderer: RendererInterface\r\n  size: SizeInterface\r\n}\r\n\r\ntype InitCallbackType = CallbackType<EventInterface>\r\ntype MountedCallbackType = CallbackType<EventInterface>\r\ntype RenderCallbackType = CallbackType<RenderEventInterface>\r\ntype ResizeCallbackType = CallbackType<ResizeEventInterface>\r\n// type CallbackTypes = InitCallbackType | MountedCallbackType | RenderCallbackType | ResizeCallbackType\r\n\r\n// interface EventMap {\r\n//   'init': EventInterface;\r\n//   'mounted': EventInterface;\r\n//   'beforerender': RenderEventInterface;\r\n//   'afterrender': RenderEventInterface;\r\n//   'resize': ResizeEventInterface;\r\n// }\r\n\r\ninterface EventCallbackMap {\r\n  'init': InitCallbackType;\r\n  'mounted': MountedCallbackType;\r\n  'beforerender': RenderCallbackType;\r\n  'afterrender': RenderCallbackType;\r\n  'resize': ResizeCallbackType;\r\n}\r\n\r\ninterface RenderFunctionEventInterface {\r\n  renderer: RendererInterface\r\n  time: number\r\n}\r\n\r\ninterface RendererSetupInterface {\r\n  canvas: HTMLCanvasElement\r\n  three: ThreeInterface\r\n  renderer: WebGLRenderer\r\n  size: SizeInterface\r\n  renderFn(e: RenderFunctionEventInterface): void\r\n  raf: boolean\r\n\r\n  $pointer?: PointerInterface\r\n\r\n  initCallbacks: InitCallbackType[]\r\n  mountedCallbacks: MountedCallbackType[]\r\n  beforeRenderCallbacks: RenderCallbackType[]\r\n  afterRenderCallbacks: RenderCallbackType[]\r\n  resizeCallbacks: ResizeCallbackType[]\r\n}\r\n\r\nexport interface RendererInterface extends RendererSetupInterface {\r\n  scene?: Scene\r\n  camera?: Camera\r\n  composer?: EffectComposer\r\n\r\n  onInit(cb: InitCallbackType): void\r\n  onMounted(cb: MountedCallbackType): void\r\n\r\n  onBeforeRender(cb: RenderCallbackType): void\r\n  offBeforeRender(cb: RenderCallbackType): void\r\n  onAfterRender(cb: RenderCallbackType): void\r\n  offAfterRender(cb: RenderCallbackType): void\r\n\r\n  onResize(cb: ResizeCallbackType): void\r\n  offResize(cb: ResizeCallbackType): void\r\n\r\n  addListener<T extends keyof EventCallbackMap>(t: T, cb: EventCallbackMap[T]): void\r\n  removeListener<T extends keyof EventCallbackMap>(t: T, cb: EventCallbackMap[T]): void\r\n}\r\n\r\nexport interface RendererPublicInterface extends ComponentPublicInstance, RendererInterface {}\r\n\r\nexport const RendererInjectionKey: InjectionKey<RendererPublicInterface> = Symbol('Renderer')\r\n\r\nexport default defineComponent({\r\n  name: 'Renderer',\r\n  props: {\r\n    params: { type: Object as PropType<WebGLRendererParameters>, default: () => ({}) },\r\n    antialias: Boolean,\r\n    alpha: Boolean,\r\n    autoClear: { type: Boolean, default: true },\r\n    orbitCtrl: { type: [Boolean, Object] as PropType<boolean | Record<string, unknown>>, default: false },\r\n    pointer: { type: [Boolean, Object] as PropType<boolean | PointerPublicConfigInterface>, default: false },\r\n    resize: { type: [Boolean, String] as PropType<boolean | string>, default: false },\r\n    shadow: Boolean,\r\n    width: String,\r\n    height: String,\r\n    pixelRatio: Number,\r\n    xr: Boolean,\r\n    props: { type: Object, default: () => ({}) },\r\n    onReady: Function as PropType<(r: RendererInterface) => void>,\r\n  },\r\n  inheritAttrs: false,\r\n  setup(props, { attrs }): RendererSetupInterface {\r\n    const initCallbacks: InitCallbackType[] = []\r\n    const mountedCallbacks: MountedCallbackType[] = []\r\n    const beforeRenderCallbacks: RenderCallbackType[] = []\r\n    const afterRenderCallbacks: RenderCallbackType[] = []\r\n    const resizeCallbacks: ResizeCallbackType[] = []\r\n\r\n    const canvas = document.createElement('canvas')\r\n    Object.entries(attrs).forEach(([key, value]) => {\r\n      const matches = key.match(/^on([A-Z][a-zA-Z]*)$/)\r\n      if (matches) {\r\n        canvas.addEventListener(matches[1].toLowerCase(), value as {(): void })\r\n      } else {\r\n        canvas.setAttribute(key, value as string)\r\n      }\r\n    })\r\n\r\n    const config: ThreeConfigInterface = {\r\n      canvas,\r\n      params: props.params,\r\n      antialias: props.antialias,\r\n      alpha: props.alpha,\r\n      autoClear: props.autoClear,\r\n      orbitCtrl: props.orbitCtrl,\r\n      pointer: props.pointer,\r\n      resize: props.resize,\r\n    }\r\n\r\n    if (props.width) config.width = parseInt(props.width)\r\n    if (props.height) config.height = parseInt(props.height)\r\n\r\n    const three = useThree(config)\r\n    bindObjectProp(props, 'props', three.renderer)\r\n\r\n    watchEffect(() => {\r\n      if (props.pixelRatio) three.renderer.setPixelRatio(props.pixelRatio)\r\n    })\r\n\r\n    const renderFn: {(): void} = () => {}\r\n\r\n    return {\r\n      canvas,\r\n      three,\r\n      renderer: three.renderer,\r\n      size: three.size,\r\n      renderFn,\r\n      raf: true,\r\n      initCallbacks,\r\n      mountedCallbacks,\r\n      beforeRenderCallbacks,\r\n      afterRenderCallbacks,\r\n      resizeCallbacks,\r\n    }\r\n  },\r\n  computed: {\r\n    camera: {\r\n      get: function(): Camera | undefined { return this.three.camera },\r\n      set: function(camera: Camera): void { this.three.camera = camera },\r\n    },\r\n    scene: {\r\n      get: function(): Scene | undefined { return this.three.scene },\r\n      set: function(scene: Scene): void { this.three.scene = scene },\r\n    },\r\n    composer: {\r\n      get: function(): EffectComposer | undefined { return this.three.composer },\r\n      set: function(composer: EffectComposer): void { this.three.composer = composer },\r\n    },\r\n  },\r\n  provide() {\r\n    return {\r\n      [RendererInjectionKey as symbol]: this,\r\n    }\r\n  },\r\n  mounted() {\r\n    // appendChild won't work on reload\r\n    this.$el.parentNode.insertBefore(this.canvas, this.$el)\r\n\r\n    if (this.three.init()) {\r\n      if (this.three.pointer) {\r\n        this.$pointer = this.three.pointer\r\n      }\r\n\r\n      // TODO : don't use config\r\n      this.three.config.onResize = (size) => {\r\n        this.resizeCallbacks.forEach(e => e({ type: 'resize', renderer: this, size }))\r\n      }\r\n\r\n      if (this.shadow) {\r\n        this.renderer.shadowMap.enabled = true\r\n      }\r\n\r\n      this.renderFn = this.three.composer ? this.three.renderC : this.three.render\r\n\r\n      this.initCallbacks.forEach(e => e({ type: 'init', renderer: this }))\r\n      this.onReady?.(this as RendererInterface)\r\n\r\n      if (this.xr) {\r\n        this.renderer.xr.enabled = true\r\n        this.renderer.setAnimationLoop(this.render)\r\n      } else {\r\n        requestAnimationFrame(this.renderLoop)\r\n      }\r\n    }\r\n\r\n    this.mountedCallbacks.forEach(e => e({ type: 'mounted', renderer: this }))\r\n  },\r\n  beforeUnmount() {\r\n    this.canvas.remove()\r\n    this.beforeRenderCallbacks = []\r\n    this.afterRenderCallbacks = []\r\n    this.raf = false\r\n    this.three.dispose()\r\n  },\r\n  methods: {\r\n    onInit(cb: InitCallbackType) { this.addListener('init', cb) },\r\n    onMounted(cb: MountedCallbackType) { this.addListener('mounted', cb) },\r\n    onBeforeRender(cb: RenderCallbackType) { this.addListener('beforerender', cb) },\r\n    offBeforeRender(cb: RenderCallbackType) { this.removeListener('beforerender', cb) },\r\n    onAfterRender(cb: RenderCallbackType) { this.addListener('afterrender', cb) },\r\n    offAfterRender(cb: RenderCallbackType) { this.removeListener('afterrender', cb) },\r\n    onResize(cb: ResizeCallbackType) { this.addListener('resize', cb) },\r\n    offResize(cb: ResizeCallbackType) { this.removeListener('resize', cb) },\r\n\r\n    addListener(type: string, cb: {(e?: any): void}) {\r\n      const callbacks = this.getCallbacks(type)\r\n      callbacks.push(cb)\r\n    },\r\n\r\n    removeListener(type: string, cb: {(e?: any): void}) {\r\n      const callbacks = this.getCallbacks(type)\r\n      const index = callbacks.indexOf(cb)\r\n      if (index !== -1) callbacks.splice(index, 1)\r\n    },\r\n\r\n    getCallbacks(type: string) {\r\n      if (type === 'init') {\r\n        return this.initCallbacks\r\n      } else if (type === 'mounted') {\r\n        return this.mountedCallbacks\r\n      } else if (type === 'beforerender') {\r\n        return this.beforeRenderCallbacks\r\n      } else if (type === 'afterrender') {\r\n        return this.afterRenderCallbacks\r\n      } else {\r\n        return this.resizeCallbacks\r\n      }\r\n    },\r\n\r\n    render(time: number) {\r\n      this.beforeRenderCallbacks.forEach(e => e({ type: 'beforerender', renderer: this, time }))\r\n      // this.onFrame?.(cbParams)\r\n      this.renderFn({ renderer: this, time })\r\n      this.afterRenderCallbacks.forEach(e => e({ type: 'afterrender', renderer: this, time }))\r\n    },\r\n    renderLoop(time: number) {\r\n      if (this.raf) requestAnimationFrame(this.renderLoop)\r\n      this.render(time)\r\n    },\r\n  },\r\n  render() {\r\n    return this.$slots.default ? this.$slots.default() : []\r\n  },\r\n  __hmrId: 'Renderer',\r\n})\r\n","import { defineComponent } from 'vue'\r\n// import { Camera } from 'three'\r\n// import { RendererInjectionKey, RendererInterface } from './Renderer'\r\n// import Object3D from './Object3D'\r\n\r\n// export interface CameraSetupInterface {\r\n//   renderer?: RendererInterface\r\n//   camera: Camera\r\n// }\r\n\r\nexport default defineComponent({\r\n  // TODO: eventually extend Object3D\r\n  // extends: Object3D,\r\n\r\n  props: {\r\n    props: { type: Object, default: () => ({}) },\r\n  },\r\n\r\n  // inject: { renderer: RendererInjectionKey as symbol },\r\n\r\n  // setup(): CameraSetupInterface {\r\n  //   return {}\r\n  // },\r\n\r\n  render() {\r\n    return this.$slots.default ? this.$slots.default() : []\r\n  },\r\n})\r\n\r\nexport function cameraSetProp(camera: any, key: string, value: any, updateProjectionMatrix = true) {\r\n  camera[key] = value\r\n  if (updateProjectionMatrix) camera.updateProjectionMatrix()\r\n}\r\n","import { defineComponent, inject, PropType, watch } from 'vue'\r\nimport { OrthographicCamera } from 'three'\r\nimport { bindObjectProp, bindProp } from '../tools'\r\nimport Camera, { cameraSetProp } from './Camera'\r\nimport { Vector3PropInterface } from './Object3D'\r\nimport { RendererInjectionKey } from './Renderer'\r\n\r\nexport default defineComponent({\r\n  extends: Camera,\r\n  name: 'OrthographicCamera',\r\n  props: {\r\n    left: { type: Number, default: -1 },\r\n    right: { type: Number, default: 1 },\r\n    top: { type: Number, default: 1 },\r\n    bottom: { type: Number, default: -1 },\r\n    near: { type: Number, default: 0.1 },\r\n    far: { type: Number, default: 2000 },\r\n    zoom: { type: Number, default: 1 },\r\n    position: { type: Object as PropType<Vector3PropInterface>, default: () => ({ x: 0, y: 0, z: 0 }) },\r\n  },\r\n  setup(props) {\r\n    const renderer = inject(RendererInjectionKey)\r\n    if (!renderer) {\r\n      console.error('Renderer not found')\r\n      return\r\n    }\r\n\r\n    const camera = new OrthographicCamera(props.left, props.right, props.top, props.bottom, props.near, props.far)\r\n    renderer.camera = camera\r\n\r\n    bindProp(props, 'position', camera)\r\n    bindObjectProp(props, 'props', camera, true, cameraSetProp);\r\n\r\n    ['left', 'right', 'top', 'bottom', 'near', 'far', 'zoom'].forEach(p => {\r\n      // @ts-ignore\r\n      watch(() => props[p], (value) => {\r\n        cameraSetProp(camera, p, value)\r\n      })\r\n    })\r\n\r\n    return { renderer, camera }\r\n  },\r\n  __hmrId: 'OrthographicCamera',\r\n})\r\n","import { defineComponent, inject, PropType, watch } from 'vue'\r\nimport { PerspectiveCamera } from 'three'\r\nimport { bindObjectProp, bindProp } from '../tools'\r\nimport Camera, { cameraSetProp } from './Camera'\r\nimport { Vector3PropInterface } from './Object3D'\r\nimport { RendererInjectionKey } from './Renderer'\r\n\r\nexport default defineComponent({\r\n  extends: Camera,\r\n  name: 'PerspectiveCamera',\r\n  props: {\r\n    aspect: { type: Number, default: 1 },\r\n    far: { type: Number, default: 2000 },\r\n    fov: { type: Number, default: 50 },\r\n    near: { type: Number, default: 0.1 },\r\n    position: { type: Object as PropType<Vector3PropInterface>, default: () => ({ x: 0, y: 0, z: 0 }) },\r\n    lookAt: { type: Object as PropType<Vector3PropInterface>, default: null },\r\n  },\r\n  setup(props) {\r\n    const renderer = inject(RendererInjectionKey)\r\n    if (!renderer) {\r\n      console.error('Renderer not found')\r\n      return\r\n    }\r\n\r\n    const camera = new PerspectiveCamera(props.fov, props.aspect, props.near, props.far)\r\n    renderer.camera = camera\r\n\r\n    bindProp(props, 'position', camera)\r\n\r\n    if (props.lookAt) camera.lookAt(props.lookAt.x ?? 0, props.lookAt.y, props.lookAt.z)\r\n    watch(() => props.lookAt, (v) => { camera.lookAt(v.x ?? 0, v.y, v.z) }, { deep: true })\r\n\r\n    bindObjectProp(props, 'props', camera, true, cameraSetProp);\r\n\r\n    ['aspect', 'far', 'fov', 'near'].forEach(p => {\r\n      // @ts-ignore\r\n      watch(() => props[p], (value) => {\r\n        cameraSetProp(camera, p, value)\r\n      })\r\n    })\r\n\r\n    return { renderer, camera }\r\n  },\r\n  __hmrId: 'PerspectiveCamera',\r\n})\r\n","import { defineComponent, inject, InjectionKey, provide, watch } from 'vue'\r\nimport { Scene, Color, Object3D, Texture } from 'three'\r\nimport { RendererInjectionKey } from './Renderer'\r\n\r\nexport const SceneInjectionKey: InjectionKey<Scene> = Symbol('Scene')\r\n\r\nexport default defineComponent({\r\n  name: 'Scene',\r\n  props: {\r\n    background: [String, Number, Object],\r\n  },\r\n  setup(props) {\r\n    const renderer = inject(RendererInjectionKey)\r\n    const scene = new Scene()\r\n\r\n    if (!renderer) {\r\n      console.error('Renderer not found')\r\n      return\r\n    }\r\n\r\n    renderer.scene = scene\r\n    provide(SceneInjectionKey, scene)\r\n\r\n    const setBackground = (value: any): void => {\r\n      if (!value) return\r\n      if (typeof value === 'string' || typeof value === 'number') {\r\n        if (scene.background instanceof Color) scene.background.set(value)\r\n        else scene.background = new Color(value)\r\n      } else if (value instanceof Texture) {\r\n        scene.background = value\r\n      }\r\n    }\r\n\r\n    setBackground(props.background)\r\n    watch(() => props.background, setBackground)\r\n\r\n    const add = (o: Object3D): void => { scene.add(o) }\r\n    const remove = (o: Object3D): void => { scene.remove(o) }\r\n\r\n    return { scene, add, remove }\r\n  },\r\n  render() {\r\n    return this.$slots.default ? this.$slots.default() : []\r\n  },\r\n  __hmrId: 'Scene',\r\n})\r\n","import { Object3D, Scene } from 'three'\r\nimport { ComponentPublicInstance, defineComponent, getCurrentInstance, PropType, watch } from 'vue'\r\nimport { bindObjectProp, bindProp } from '../tools'\r\nimport { RendererInjectionKey, RendererInterface } from './Renderer'\r\nimport { SceneInjectionKey } from './Scene'\r\n\r\nexport interface Object3DSetupInterface {\r\n  renderer?: RendererInterface\r\n  scene?: Scene\r\n  o3d?: Object3D\r\n  parent?: ComponentPublicInstance\r\n}\r\n\r\nexport interface Object3DInterface extends Object3DSetupInterface {\r\n  addToParent(o?: Object3D): boolean\r\n  removeFromParent(o?: Object3D): boolean\r\n  add(o: Object3D): void\r\n  remove(o: Object3D): void\r\n}\r\n\r\nexport interface Object3DPublicInterface extends ComponentPublicInstance, Object3DInterface {}\r\n\r\n// export function object3DSetup(): Object3DSetupInterface {\r\n//   const renderer = inject(RendererInjectionKey)\r\n//   const scene = inject(SceneInjectionKey)\r\n//   return { scene, renderer }\r\n// }\r\n\r\nexport const pointerProps = {\r\n  onPointerEnter: Function,\r\n  onPointerOver: Function,\r\n  onPointerMove: Function,\r\n  onPointerLeave: Function,\r\n  onPointerDown: Function,\r\n  onPointerUp: Function,\r\n  onClick: Function,\r\n}\r\n\r\nexport interface Vector2PropInterface {\r\n  x?: number\r\n  y?: number\r\n  width?: number\r\n  height?: number\r\n}\r\n\r\nexport interface Vector3PropInterface extends Vector2PropInterface {\r\n  z?: number\r\n}\r\n\r\nexport interface EulerPropInterface extends Vector3PropInterface {\r\n  order?: 'XYZ' | 'YZX' | 'ZXY' | 'XZY' | 'YXZ' | 'ZYX'\r\n}\r\n\r\nexport default defineComponent({\r\n  name: 'Object3D',\r\n  // inject for sub components\r\n  inject: {\r\n    renderer: RendererInjectionKey as symbol,\r\n    scene: SceneInjectionKey as symbol,\r\n  },\r\n  emits: ['created', 'ready'],\r\n  props: {\r\n    position: { type: Object as PropType<Vector3PropInterface>, default: () => ({ x: 0, y: 0, z: 0 }) },\r\n    rotation: { type: Object as PropType<EulerPropInterface>, default: () => ({ x: 0, y: 0, z: 0 }) },\r\n    scale: { type: Object as PropType<Vector3PropInterface>, default: () => ({ x: 1, y: 1, z: 1, order: 'XYZ' }) },\r\n    lookAt: { type: Object as PropType<Vector3PropInterface>, default: null },\r\n    userData: { type: Object, default: () => ({}) },\r\n    visible: { type: Boolean, default: true },\r\n    props: { type: Object, default: () => ({}) },\r\n    disableAdd: { type: Boolean, default: false },\r\n    disableRemove: { type: Boolean, default: false },\r\n    ...pointerProps,\r\n  },\r\n  setup(): Object3DSetupInterface {\r\n    // return object3DSetup()\r\n    return {}\r\n  },\r\n  created() {\r\n    if (!this.renderer) {\r\n      console.error('Missing parent Renderer')\r\n    }\r\n    if (!this.scene) {\r\n      console.error('Missing parent Scene')\r\n    }\r\n  },\r\n  unmounted() {\r\n    if (!this.disableRemove) this.removeFromParent()\r\n    if (this.o3d) {\r\n      if (this.renderer) this.renderer.three.removeIntersectObject(this.o3d)\r\n    }\r\n  },\r\n  methods: {\r\n    initObject3D(o3d: Object3D) {\r\n      this.o3d = o3d\r\n      o3d.userData.component = this\r\n\r\n      if (this.onPointerEnter ||\r\n        this.onPointerOver ||\r\n        this.onPointerMove ||\r\n        this.onPointerLeave ||\r\n        this.onPointerDown ||\r\n        this.onPointerUp ||\r\n        this.onClick) {\r\n        if (this.renderer) this.renderer.three.addIntersectObject(o3d)\r\n      }\r\n\r\n      bindProp(this, 'position', o3d)\r\n      bindProp(this, 'rotation', o3d)\r\n      bindProp(this, 'scale', o3d)\r\n      bindProp(this, 'userData', o3d.userData)\r\n      bindProp(this, 'visible', o3d)\r\n\r\n      bindObjectProp(this, 'props', o3d)\r\n\r\n      this.$emit('created', o3d)\r\n\r\n      if (this.lookAt) o3d.lookAt(this.lookAt.x ?? 0, this.lookAt.y, this.lookAt.z)\r\n      watch(() => this.lookAt, (v) => { o3d.lookAt(v.x ?? 0, v.y, v.z) }, { deep: true })\r\n\r\n      this.parent = this.getParent()\r\n      if (!this.disableAdd) {\r\n        if (this.addToParent()) this.$emit('ready', this)\r\n        else console.error('Missing parent (Scene, Group...)')\r\n      }\r\n    },\r\n    getParent(): undefined | ComponentPublicInstance {\r\n      let parent = this.$parent\r\n\r\n      if (!parent) {\r\n        // for script setup\r\n        const instance = getCurrentInstance() as any // ctx is internal\r\n        if (instance && instance.parent) parent = instance.parent.ctx\r\n      }\r\n\r\n      while (parent) {\r\n        if ((parent as any).add) return parent\r\n        parent = parent.$parent\r\n      }\r\n      return undefined\r\n    },\r\n    addToParent(o?: Object3D) {\r\n      const o3d = o || this.o3d\r\n      if (this.parent) {\r\n        (this.parent as any).add(o3d)\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n    removeFromParent(o?: Object3D) {\r\n      const o3d = o || this.o3d\r\n      if (this.parent) {\r\n        (this.parent as any).remove(o3d)\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n    add(o: Object3D) { this.o3d?.add(o) },\r\n    remove(o: Object3D) { this.o3d?.remove(o) },\r\n  },\r\n  render() {\r\n    return this.$slots.default ? this.$slots.default() : []\r\n  },\r\n  __hmrId: 'Object3D',\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { Group } from 'three'\r\nimport Object3D from './Object3D'\r\n\r\nexport default defineComponent({\r\n  name: 'Group',\r\n  extends: Object3D,\r\n  setup() {\r\n    return {\r\n      group: new Group(),\r\n    }\r\n  },\r\n  created() {\r\n    this.initObject3D(this.group)\r\n  },\r\n  __hmrId: 'Group',\r\n})\r\n","import { defineComponent, inject, PropType } from 'vue'\r\nimport usePointer, { PointerInterface, PointerIntersectCallbackType } from './usePointer'\r\nimport { RendererInjectionKey, RendererInterface } from './Renderer'\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-empty-function\r\nconst emptyCallBack: PointerIntersectCallbackType = () => {}\r\n\r\ninterface RaycasterSetupInterface {\r\n  renderer?: RendererInterface\r\n  pointer?: PointerInterface\r\n}\r\n\r\nexport default defineComponent({\r\n  name: 'Raycaster',\r\n  props: {\r\n    onPointerEnter: { type: Function as PropType<PointerIntersectCallbackType>, default: emptyCallBack },\r\n    onPointerOver: { type: Function as PropType<PointerIntersectCallbackType>, default: emptyCallBack },\r\n    onPointerMove: { type: Function as PropType<PointerIntersectCallbackType>, default: emptyCallBack },\r\n    onPointerLeave: { type: Function as PropType<PointerIntersectCallbackType>, default: emptyCallBack },\r\n    onClick: { type: Function as PropType<PointerIntersectCallbackType>, default: emptyCallBack },\r\n    intersectMode: { type: String, default: 'move' },\r\n    intersectRecursive: { type: Boolean, default: false },\r\n  },\r\n  setup(): RaycasterSetupInterface {\r\n    const renderer = inject(RendererInjectionKey)\r\n    return { renderer }\r\n  },\r\n  mounted() {\r\n    if (!this.renderer) {\r\n      console.error('Renderer not found')\r\n      return\r\n    }\r\n    const renderer = this.renderer\r\n\r\n    this.renderer.onMounted(() => {\r\n      if (!renderer.camera) return\r\n\r\n      this.pointer = usePointer({\r\n        camera: renderer.camera,\r\n        domElement: renderer.canvas,\r\n        intersectObjects: () => renderer.scene ? renderer.scene.children : [],\r\n        intersectRecursive: this.intersectRecursive,\r\n        onIntersectEnter: this.onPointerEnter,\r\n        onIntersectOver: this.onPointerOver,\r\n        onIntersectMove: this.onPointerMove,\r\n        onIntersectLeave: this.onPointerLeave,\r\n        onIntersectClick: this.onClick,\r\n      })\r\n      this.pointer.addListeners()\r\n\r\n      if (this.intersectMode === 'frame') {\r\n        renderer.onBeforeRender(this.pointer.intersect)\r\n      }\r\n    })\r\n  },\r\n  unmounted() {\r\n    if (this.pointer) {\r\n      this.pointer.removeListeners()\r\n      this.renderer?.offBeforeRender(this.pointer.intersect)\r\n    }\r\n  },\r\n  render() {\r\n    return []\r\n  },\r\n  __hmrId: 'Raycaster',\r\n})\r\n","import { defineComponent, inject, onUnmounted, PropType } from 'vue'\r\nimport { CubeCamera, LinearMipmapLinearFilter, Mesh, RGBAFormat, WebGLCubeRenderTarget } from 'three'\r\nimport Object3D from './Object3D'\r\nimport { RendererInjectionKey } from './Renderer'\r\n\r\ninterface CubeCameraSetupInterface {\r\n  cubeRT?: WebGLCubeRenderTarget\r\n  cubeCamera?: CubeCamera\r\n  updateRT?: {(): void}\r\n}\r\n\r\nexport default defineComponent({\r\n  extends: Object3D,\r\n  props: {\r\n    cubeRTSize: { type: Number, default: 256 },\r\n    cubeCameraNear: { type: Number, default: 0.1 },\r\n    cubeCameraFar: { type: Number, default: 2000 },\r\n    autoUpdate: Boolean,\r\n    hideMeshes: { type: Array as PropType<Mesh[]>, default: () => ([]) },\r\n  },\r\n  setup(props): CubeCameraSetupInterface {\r\n    const rendererC = inject(RendererInjectionKey)\r\n    if (!rendererC || !rendererC.scene) {\r\n      console.error('Missing Renderer / Scene')\r\n      return {}\r\n    }\r\n\r\n    const renderer = rendererC.renderer, scene = rendererC.scene\r\n    const cubeRT = new WebGLCubeRenderTarget(props.cubeRTSize, { format: RGBAFormat, generateMipmaps: true, minFilter: LinearMipmapLinearFilter })\r\n    const cubeCamera = new CubeCamera(props.cubeCameraNear, props.cubeCameraFar, cubeRT)\r\n    const updateRT = () => {\r\n      props.hideMeshes.forEach(m => { m.visible = false })\r\n      cubeCamera.update(renderer, scene)\r\n      props.hideMeshes.forEach(m => { m.visible = true })\r\n    }\r\n\r\n    if (props.autoUpdate) {\r\n      rendererC.onBeforeRender(updateRT)\r\n      onUnmounted(() => { rendererC.offBeforeRender(updateRT) })\r\n    } else {\r\n      rendererC.onMounted(updateRT)\r\n    }\r\n\r\n    return { cubeRT, cubeCamera, updateRT }\r\n  },\r\n  created() {\r\n    if (this.cubeCamera) this.initObject3D(this.cubeCamera)\r\n  },\r\n  render() {\r\n    return []\r\n  },\r\n  __hmrId: 'CubeCamera',\r\n})\r\n","import { ComponentPropsOptions, ComponentPublicInstance, defineComponent, InjectionKey, watch } from 'vue'\r\nimport { BufferGeometry, Material, Mesh as TMesh } from 'three'\r\nimport Object3D, { Object3DSetupInterface } from '../core/Object3D'\r\nimport { bindProp } from '../tools'\r\n\r\nexport interface MeshSetupInterface extends Object3DSetupInterface {\r\n  mesh?: TMesh\r\n  geometry?: BufferGeometry\r\n  material?: Material\r\n  loading?: boolean\r\n}\r\n\r\nexport interface MeshInterface extends MeshSetupInterface {\r\n  setGeometry(g: BufferGeometry): void\r\n  setMaterial(m: Material): void\r\n}\r\n\r\nexport interface MeshPublicInterface extends ComponentPublicInstance, MeshInterface {}\r\n\r\nexport const MeshInjectionKey: InjectionKey<MeshPublicInterface> = Symbol('Mesh')\r\n\r\nconst Mesh = defineComponent({\r\n  name: 'Mesh',\r\n  extends: Object3D,\r\n  props: {\r\n    castShadow: Boolean,\r\n    receiveShadow: Boolean,\r\n  },\r\n  setup(): MeshSetupInterface {\r\n    return {}\r\n  },\r\n  provide() {\r\n    return {\r\n      [MeshInjectionKey as symbol]: this,\r\n    }\r\n  },\r\n  mounted() {\r\n    // TODO : proper ?\r\n    if (!this.mesh && !this.loading) this.initMesh()\r\n  },\r\n  methods: {\r\n    initMesh() {\r\n      const mesh = new TMesh(this.geometry, this.material)\r\n\r\n      bindProp(this, 'castShadow', mesh)\r\n      bindProp(this, 'receiveShadow', mesh)\r\n\r\n      this.mesh = mesh\r\n      this.initObject3D(mesh)\r\n    },\r\n    createGeometry() {},\r\n    addGeometryWatchers(props: Readonly<ComponentPropsOptions>) {\r\n      Object.keys(props).forEach(prop => {\r\n        // @ts-ignore\r\n        watch(() => this[prop], () => {\r\n          this.refreshGeometry()\r\n        })\r\n      })\r\n    },\r\n    setGeometry(geometry: BufferGeometry) {\r\n      this.geometry = geometry\r\n      if (this.mesh) this.mesh.geometry = geometry\r\n    },\r\n    setMaterial(material: Material) {\r\n      this.material = material\r\n      if (this.mesh) this.mesh.material = material\r\n    },\r\n    refreshGeometry() {\r\n      const oldGeo = this.geometry\r\n      this.createGeometry()\r\n      if (this.mesh && this.geometry) this.mesh.geometry = this.geometry\r\n      oldGeo?.dispose()\r\n    },\r\n  },\r\n  unmounted() {\r\n    // for predefined mesh (geometry/material are not unmounted)\r\n    if (this.geometry) this.geometry.dispose()\r\n    if (this.material) this.material.dispose()\r\n  },\r\n  __hmrId: 'Mesh',\r\n})\r\n\r\nexport default Mesh\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nexport function meshComponent<P extends Readonly<ComponentPropsOptions>>(\r\n  name: string,\r\n  props: P,\r\n  createGeometry: {(c: any): BufferGeometry}\r\n) {\r\n  return defineComponent({\r\n    name,\r\n    extends: Mesh,\r\n    props,\r\n    created() {\r\n      this.createGeometry()\r\n      this.addGeometryWatchers(props)\r\n    },\r\n    methods: {\r\n      createGeometry() {\r\n        this.geometry = createGeometry(this)\r\n      },\r\n    },\r\n  })\r\n}\r\n","import { ComponentPropsOptions, defineComponent, PropType, watch } from 'vue'\r\nimport { BufferAttribute, BufferGeometry } from 'three'\r\nimport { MeshInjectionKey, MeshInterface } from '../meshes/Mesh'\r\n\r\nexport interface GeometrySetupInterface {\r\n  mesh?: MeshInterface\r\n  geometry?: BufferGeometry\r\n  watchProps?: string[]\r\n}\r\n\r\nexport interface GeometryAttributeInterface {\r\n  name: string\r\n  array: ArrayLike<number>\r\n  itemSize: number\r\n  normalized?: boolean\r\n}\r\n\r\n// function defaultSetup(): GeometryInterface {\r\n//   const mesh = inject('mesh') as MeshInterface\r\n//   const watchProps: string[] = []\r\n//   return { mesh, watchProps }\r\n// }\r\n\r\nconst Geometry = defineComponent({\r\n  emits: ['created'],\r\n  props: {\r\n    rotateX: Number,\r\n    rotateY: Number,\r\n    rotateZ: Number,\r\n    attributes: { type: Array as PropType<Array<GeometryAttributeInterface>>, default: () => ([]) },\r\n  },\r\n  // inject for sub components\r\n  inject: {\r\n    mesh: MeshInjectionKey as symbol,\r\n  },\r\n  setup(): GeometrySetupInterface {\r\n    return {}\r\n  },\r\n  created() {\r\n    if (!this.mesh) {\r\n      console.error('Missing parent Mesh')\r\n      return\r\n    }\r\n\r\n    this.createGeometry()\r\n    this.rotateGeometry()\r\n    if (this.geometry) this.mesh.setGeometry(this.geometry)\r\n\r\n    Object.keys(this.$props).forEach(prop => {\r\n      // @ts-ignore\r\n      watch(() => this[prop], this.refreshGeometry)\r\n    })\r\n  },\r\n  unmounted() {\r\n    this.geometry?.dispose()\r\n  },\r\n  methods: {\r\n    createGeometry() {\r\n      const bufferAttributes: Record<string, unknown> = {}\r\n      const geometry = new BufferGeometry()\r\n      this.attributes.forEach(attribute => {\r\n        if (attribute.name && attribute.itemSize && attribute.array) {\r\n          const bufferAttribute = bufferAttributes[attribute.name] = new BufferAttribute(attribute.array, attribute.itemSize, attribute.normalized)\r\n          geometry.setAttribute(attribute.name, bufferAttribute)\r\n        }\r\n      })\r\n      geometry.computeBoundingBox()\r\n      geometry.userData.component = this\r\n      this.geometry = geometry\r\n      this.$emit('created', geometry)\r\n    },\r\n    rotateGeometry() {\r\n      if (!this.geometry) return\r\n      if (this.rotateX) this.geometry.rotateX(this.rotateX)\r\n      if (this.rotateY) this.geometry.rotateY(this.rotateY)\r\n      if (this.rotateZ) this.geometry.rotateZ(this.rotateZ)\r\n    },\r\n    refreshGeometry() {\r\n      const oldGeo = this.geometry\r\n      this.createGeometry()\r\n      this.rotateGeometry()\r\n      if (this.geometry && this.mesh) this.mesh.setGeometry(this.geometry)\r\n      oldGeo?.dispose()\r\n    },\r\n  },\r\n  render() { return [] },\r\n})\r\n\r\nexport default Geometry\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nexport function geometryComponent<P extends Readonly<ComponentPropsOptions>>(\r\n  name: string,\r\n  props: P,\r\n  createGeometry: {(c: any): BufferGeometry}\r\n) {\r\n  return defineComponent({\r\n    name,\r\n    extends: Geometry,\r\n    props,\r\n    methods: {\r\n      createGeometry() {\r\n        this.geometry = createGeometry(this)\r\n        this.geometry.userData.component = this\r\n        this.$emit('created', this.geometry)\r\n      },\r\n    },\r\n  })\r\n}\r\n","import { geometryComponent } from './Geometry'\r\nimport { BoxGeometry } from 'three'\r\n\r\nexport const props = {\r\n  size: Number,\r\n  width: { type: Number, default: 1 },\r\n  height: { type: Number, default: 1 },\r\n  depth: { type: Number, default: 1 },\r\n  widthSegments: { type: Number, default: 1 },\r\n  heightSegments: { type: Number, default: 1 },\r\n  depthSegments: { type: Number, default: 1 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): BoxGeometry {\r\n  if (comp.size) {\r\n    return new BoxGeometry(comp.size, comp.size, comp.size, comp.widthSegments, comp.heightSegments, comp.depthSegments)\r\n  } else {\r\n    return new BoxGeometry(comp.width, comp.height, comp.depth, comp.widthSegments, comp.heightSegments, comp.depthSegments)\r\n  }\r\n}\r\n\r\nexport default geometryComponent('BoxGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { CircleGeometry } from 'three'\r\n\r\nexport const props = {\r\n  radius: { type: Number, default: 1 },\r\n  segments: { type: Number, default: 8 },\r\n  thetaStart: { type: Number, default: 0 },\r\n  thetaLength: { type: Number, default: Math.PI * 2 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): CircleGeometry {\r\n  return new CircleGeometry(comp.radius, comp.segments, comp.thetaStart, comp.thetaLength)\r\n}\r\n\r\nexport default geometryComponent('CircleGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { ConeGeometry } from 'three'\r\n\r\nexport const props = {\r\n  radius: { type: Number, default: 1 },\r\n  height: { type: Number, default: 1 },\r\n  radialSegments: { type: Number, default: 8 },\r\n  heightSegments: { type: Number, default: 1 },\r\n  openEnded: { type: Boolean, default: false },\r\n  thetaStart: { type: Number, default: 0 },\r\n  thetaLength: { type: Number, default: Math.PI * 2 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): ConeGeometry {\r\n  return new ConeGeometry(comp.radius, comp.height, comp.radialSegments, comp.heightSegments, comp.openEnded, comp.thetaStart, comp.thetaLength)\r\n}\r\n\r\nexport default geometryComponent('ConeGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { CylinderGeometry } from 'three'\r\n\r\nexport const props = {\r\n  radiusTop: { type: Number, default: 1 },\r\n  radiusBottom: { type: Number, default: 1 },\r\n  height: { type: Number, default: 1 },\r\n  radialSegments: { type: Number, default: 8 },\r\n  heightSegments: { type: Number, default: 1 },\r\n  openEnded: { type: Boolean, default: false },\r\n  thetaStart: { type: Number, default: 0 },\r\n  thetaLength: { type: Number, default: Math.PI * 2 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): CylinderGeometry {\r\n  return new CylinderGeometry(comp.radiusTop, comp.radiusBottom, comp.height, comp.radialSegments, comp.heightSegments, comp.openEnded, comp.thetaStart, comp.thetaLength)\r\n}\r\n\r\nexport default geometryComponent('CylinderGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { DodecahedronGeometry } from 'three'\r\n\r\nexport const props = {\r\n  radius: { type: Number, default: 1 },\r\n  detail: { type: Number, default: 0 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): DodecahedronGeometry {\r\n  return new DodecahedronGeometry(comp.radius, comp.detail)\r\n}\r\n\r\nexport default geometryComponent('DodecahedronGeometry', props, createGeometry)\r\n","import { PropType } from 'vue'\r\nimport { geometryComponent } from './Geometry'\r\nimport { ExtrudeGeometry, ExtrudeGeometryOptions, Shape } from 'three'\r\n\r\nexport const props = {\r\n  shapes: { type: [Object, Array] as PropType<Shape | Shape[]> },\r\n  options: { type: Object as PropType<ExtrudeGeometryOptions> },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): ExtrudeGeometry {\r\n  return new ExtrudeGeometry(comp.shapes, comp.options)\r\n}\r\n\r\nexport default geometryComponent('ExtrudeGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { IcosahedronGeometry } from 'three'\r\n\r\nexport const props = {\r\n  radius: { type: Number, default: 1 },\r\n  detail: { type: Number, default: 0 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): IcosahedronGeometry {\r\n  return new IcosahedronGeometry(comp.radius, comp.detail)\r\n}\r\n\r\nexport default geometryComponent('IcosahedronGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { LatheGeometry } from 'three'\r\n\r\nexport const props = {\r\n  points: Array,\r\n  segments: { type: Number, default: 12 },\r\n  phiStart: { type: Number, default: 0 },\r\n  phiLength: { type: Number, default: Math.PI * 2 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): LatheGeometry {\r\n  return new LatheGeometry(comp.points, comp.segments, comp.phiStart, comp.phiLength)\r\n}\r\n\r\nexport default geometryComponent('LatheGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { OctahedronGeometry } from 'three'\r\n\r\nexport const props = {\r\n  radius: { type: Number, default: 1 },\r\n  detail: { type: Number, default: 0 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): OctahedronGeometry {\r\n  return new OctahedronGeometry(comp.radius, comp.detail)\r\n}\r\n\r\nexport default geometryComponent('OctahedronGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { PlaneGeometry } from 'three'\r\n\r\nexport const props = {\r\n  width: { type: Number, default: 1 },\r\n  height: { type: Number, default: 1 },\r\n  widthSegments: { type: Number, default: 1 },\r\n  heightSegments: { type: Number, default: 1 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): PlaneGeometry {\r\n  return new PlaneGeometry(comp.width, comp.height, comp.widthSegments, comp.heightSegments)\r\n}\r\n\r\nexport default geometryComponent('PlaneGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { PolyhedronGeometry } from 'three'\r\n\r\nexport const props = {\r\n  vertices: Array,\r\n  indices: Array,\r\n  radius: { type: Number, default: 1 },\r\n  detail: { type: Number, default: 0 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): PolyhedronGeometry {\r\n  return new PolyhedronGeometry(comp.vertices, comp.indices, comp.radius, comp.detail)\r\n}\r\n\r\nexport default geometryComponent('PolyhedronGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { RingGeometry } from 'three'\r\n\r\nexport const props = {\r\n  innerRadius: { type: Number, default: 0.5 },\r\n  outerRadius: { type: Number, default: 1 },\r\n  thetaSegments: { type: Number, default: 8 },\r\n  phiSegments: { type: Number, default: 1 },\r\n  thetaStart: { type: Number, default: 0 },\r\n  thetaLength: { type: Number, default: Math.PI * 2 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): RingGeometry {\r\n  return new RingGeometry(comp.innerRadius, comp.outerRadius, comp.thetaSegments, comp.phiSegments, comp.thetaStart, comp.thetaLength)\r\n}\r\n\r\nexport default geometryComponent('RingGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { SphereGeometry } from 'three'\r\n\r\nexport const props = {\r\n  radius: { type: Number, default: 1 },\r\n  widthSegments: { type: Number, default: 12 },\r\n  heightSegments: { type: Number, default: 12 },\r\n  phiStart: { type: Number, default: 0 },\r\n  phiLength: { type: Number, default: Math.PI * 2 },\r\n  thetaStart: { type: Number, default: 0 },\r\n  thetaLength: { type: Number, default: Math.PI },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): SphereGeometry {\r\n  return new SphereGeometry(comp.radius, comp.widthSegments, comp.heightSegments, comp.phiStart, comp.phiLength, comp.thetaStart, comp.thetaLength)\r\n}\r\n\r\nexport default geometryComponent('SphereGeometry', props, createGeometry)\r\n","import { PropType } from 'vue'\r\nimport { geometryComponent } from './Geometry'\r\nimport { Shape, ShapeGeometry } from 'three'\r\n\r\nexport const props = {\r\n  shapes: { type: [Object, Array] as PropType<Shape | Shape[]> },\r\n  curveSegments: { type: Number },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): ShapeGeometry {\r\n  return new ShapeGeometry(comp.shapes, comp.curveSegments)\r\n}\r\n\r\nexport default geometryComponent('ShapeGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { TetrahedronGeometry } from 'three'\r\n\r\nexport const props = {\r\n  radius: { type: Number, default: 1 },\r\n  detail: { type: Number, default: 0 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): TetrahedronGeometry {\r\n  return new TetrahedronGeometry(comp.radius, comp.detail)\r\n}\r\n\r\nexport default geometryComponent('TetrahedronGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { TorusGeometry } from 'three'\r\n\r\nexport const props = {\r\n  radius: { type: Number, default: 1 },\r\n  tube: { type: Number, default: 0.4 },\r\n  radialSegments: { type: Number, default: 8 },\r\n  tubularSegments: { type: Number, default: 6 },\r\n  arc: { type: Number, default: Math.PI * 2 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): TorusGeometry {\r\n  return new TorusGeometry(comp.radius, comp.tube, comp.radialSegments, comp.tubularSegments, comp.arc)\r\n}\r\n\r\nexport default geometryComponent('TorusGeometry', props, createGeometry)\r\n","import { geometryComponent } from './Geometry'\r\nimport { TorusKnotGeometry } from 'three'\r\n\r\nexport const props = {\r\n  radius: { type: Number, default: 1 },\r\n  tube: { type: Number, default: 0.4 },\r\n  tubularSegments: { type: Number, default: 64 },\r\n  radialSegments: { type: Number, default: 8 },\r\n  p: { type: Number, default: 2 },\r\n  q: { type: Number, default: 3 },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): TorusKnotGeometry {\r\n  return new TorusKnotGeometry(comp.radius, comp.tube, comp.tubularSegments, comp.radialSegments, comp.p, comp.q)\r\n}\r\n\r\nexport default geometryComponent('TorusKnotGeometry', props, createGeometry)\r\n","import { defineComponent } from 'vue'\r\nimport { CatmullRomCurve3, Curve, TubeGeometry, Vector3 } from 'three'\r\nimport Geometry from './Geometry'\r\n\r\nexport const props = {\r\n  points: Array,\r\n  path: Curve,\r\n  tubularSegments: { type: Number, default: 64 },\r\n  radius: { type: Number, default: 1 },\r\n  radialSegments: { type: Number, default: 8 },\r\n  closed: { type: Boolean, default: false },\r\n} as const\r\n\r\nexport function createGeometry(comp: any): TubeGeometry {\r\n  let curve\r\n  if (comp.points) {\r\n    curve = new CatmullRomCurve3(comp.points)\r\n  } else if (comp.path) {\r\n    curve = comp.path\r\n  } else {\r\n    console.error('Missing path curve or points.')\r\n  }\r\n  return new TubeGeometry(curve, comp.tubularSegments, comp.radius, comp.radiusSegments, comp.closed)\r\n}\r\n\r\nexport default defineComponent({\r\n  extends: Geometry,\r\n  props,\r\n  methods: {\r\n    createGeometry() {\r\n      this.geometry = createGeometry(this)\r\n    },\r\n    // update points (without using prop, faster)\r\n    updatePoints(points: Vector3[]) {\r\n      updateTubeGeometryPoints(this.geometry as TubeGeometry, points)\r\n    },\r\n  },\r\n})\r\n\r\nexport function updateTubeGeometryPoints(tube: TubeGeometry, points: Vector3[]): void {\r\n  const curve = new CatmullRomCurve3(points)\r\n  const { radialSegments, radius, tubularSegments, closed } = tube.parameters\r\n  const frames = curve.computeFrenetFrames(tubularSegments, closed)\r\n  tube.tangents = frames.tangents\r\n  tube.normals = frames.normals\r\n  tube.binormals = frames.binormals\r\n  tube.parameters.path = curve\r\n\r\n  const pAttribute = tube.getAttribute('position')\r\n  const nAttribute = tube.getAttribute('normal')\r\n\r\n  const normal = new Vector3()\r\n  const P = new Vector3()\r\n\r\n  for (let i = 0; i < tubularSegments; i++) {\r\n    updateSegment(i)\r\n  }\r\n  updateSegment(tubularSegments)\r\n\r\n  tube.attributes.position.needsUpdate = true\r\n  tube.attributes.normal.needsUpdate = true\r\n\r\n  function updateSegment(i: number) {\r\n    curve.getPointAt(i / tubularSegments, P)\r\n    const N = frames.normals[i]\r\n    const B = frames.binormals[i]\r\n    for (let j = 0; j <= radialSegments; j++) {\r\n      const v = j / radialSegments * Math.PI * 2\r\n      const sin = Math.sin(v)\r\n      const cos = -Math.cos(v)\r\n      normal.x = (cos * N.x + sin * B.x)\r\n      normal.y = (cos * N.y + sin * B.y)\r\n      normal.z = (cos * N.z + sin * B.z)\r\n      normal.normalize()\r\n      const index = (i * (radialSegments + 1) + j)\r\n      nAttribute.setXYZ(index, normal.x, normal.y, normal.z)\r\n      pAttribute.setXYZ(index, P.x + radius * normal.x, P.y + radius * normal.y, P.z + radius * normal.z)\r\n    }\r\n  }\r\n}\r\n","import { DirectionalLight, Light, SpotLight } from 'three'\r\nimport { defineComponent, PropType, watch } from 'vue'\r\nimport Object3D, { Vector2PropInterface } from '../core/Object3D'\r\nimport { bindProp, setFromProp } from '../tools'\r\n\r\nexport interface LightSetupInterface {\r\n  light?: Light\r\n}\r\n\r\nexport default defineComponent({\r\n  extends: Object3D,\r\n  name: 'Light',\r\n  props: {\r\n    color: { type: String, default: '#ffffff' },\r\n    intensity: { type: Number, default: 1 },\r\n    castShadow: { type: Boolean, default: false },\r\n    shadowMapSize: { type: Object as PropType<Vector2PropInterface>, default: () => ({ x: 512, y: 512 }) },\r\n    shadowCamera: { type: Object, default: () => ({}) },\r\n  },\r\n  setup(): LightSetupInterface {\r\n    return {}\r\n  },\r\n  unmounted() {\r\n    if (this.light instanceof SpotLight || this.light instanceof DirectionalLight) {\r\n      this.removeFromParent(this.light.target)\r\n    }\r\n  },\r\n  methods: {\r\n    initLight(light: Light) {\r\n      this.light = light\r\n\r\n      if ((light as any).shadow) {\r\n        light.castShadow = this.castShadow\r\n        // @ts-ignore\r\n        setFromProp(light.shadow.mapSize, this.shadowMapSize)\r\n        // @ts-ignore\r\n        setFromProp(light.shadow.camera, this.shadowCamera)\r\n      }\r\n\r\n      ['color', 'intensity', 'castShadow'].forEach(p => {\r\n        // @ts-ignore\r\n        watch(() => this[p], (value) => {\r\n          if (p === 'color') {\r\n            light.color.set(value)\r\n          } else {\r\n            // @ts-ignore\r\n            light[p] = value\r\n          }\r\n        })\r\n      })\r\n\r\n      this.initObject3D(light)\r\n\r\n      if (light instanceof SpotLight || light instanceof DirectionalLight) {\r\n        bindProp(this, 'target', light.target, 'position')\r\n        this.addToParent(light.target)\r\n      }\r\n    },\r\n  },\r\n  __hmrId: 'Light',\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { AmbientLight } from 'three'\r\nimport Light from './Light'\r\n\r\nexport default defineComponent({\r\n  extends: Light,\r\n  created() {\r\n    this.initLight(new AmbientLight(this.color, this.intensity))\r\n  },\r\n  __hmrId: 'AmbientLight',\r\n})\r\n","import { defineComponent, PropType } from 'vue'\r\nimport { DirectionalLight } from 'three'\r\nimport { Vector3PropInterface } from '../core/Object3D'\r\nimport Light from './Light'\r\n\r\nexport default defineComponent({\r\n  extends: Light,\r\n  props: {\r\n    target: { type: Object as PropType<Vector3PropInterface>, default: () => ({ x: 0, y: 0, z: 0 }) },\r\n  },\r\n  created() {\r\n    this.initLight(new DirectionalLight(this.color, this.intensity))\r\n  },\r\n  __hmrId: 'DirectionalLight',\r\n})\r\n","import { defineComponent, watch } from 'vue'\r\nimport { HemisphereLight } from 'three'\r\nimport Light from './Light'\r\n\r\nexport default defineComponent({\r\n  extends: Light,\r\n  props: {\r\n    groundColor: { type: String, default: '#444444' },\r\n  },\r\n  created() {\r\n    const light = new HemisphereLight(this.color, this.groundColor, this.intensity)\r\n    watch(() => this.groundColor, (value) => { light.groundColor.set(value) })\r\n    this.initLight(light)\r\n  },\r\n  __hmrId: 'HemisphereLight',\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { PointLight } from 'three'\r\nimport Light from './Light'\r\n\r\nexport default defineComponent({\r\n  extends: Light,\r\n  props: {\r\n    distance: { type: Number, default: 0 },\r\n    decay: { type: Number, default: 1 },\r\n  },\r\n  created() {\r\n    this.initLight(new PointLight(this.color, this.intensity, this.distance, this.decay))\r\n  },\r\n  __hmrId: 'PointLight',\r\n})\r\n","import { defineComponent, watch } from 'vue'\r\nimport { RectAreaLight } from 'three'\r\nimport { RectAreaLightUniformsLib } from 'three/examples/jsm/lights/RectAreaLightUniformsLib.js'\r\nimport { RectAreaLightHelper } from 'three/examples/jsm/helpers/RectAreaLightHelper.js'\r\nimport Light from './Light'\r\n\r\nexport default defineComponent({\r\n  extends: Light,\r\n  props: {\r\n    width: { type: Number, default: 10 },\r\n    height: { type: Number, default: 10 },\r\n    helper: Boolean,\r\n  },\r\n  created() {\r\n    RectAreaLightUniformsLib.init()\r\n    const light = new RectAreaLight(this.color, this.intensity, this.width, this.height)\r\n\r\n    const watchProps = ['width', 'height']\r\n    watchProps.forEach(p => {\r\n      // @ts-ignore\r\n      watch(() => this[p], (value) => { light[p] = value })\r\n    })\r\n\r\n    if (this.helper) {\r\n      const lightHelper = new RectAreaLightHelper(light)\r\n      light.add(lightHelper)\r\n    }\r\n\r\n    this.initLight(light)\r\n  },\r\n  __hmrId: 'RectAreaLight',\r\n})\r\n","import { defineComponent, watch } from 'vue'\r\nimport { SpotLight } from 'three'\r\nimport Light from './Light'\r\n\r\nexport default defineComponent({\r\n  extends: Light,\r\n  props: {\r\n    angle: { type: Number, default: Math.PI / 3 },\r\n    decay: { type: Number, default: 1 },\r\n    distance: { type: Number, default: 0 },\r\n    penumbra: { type: Number, default: 0 },\r\n    target: Object,\r\n  },\r\n  created() {\r\n    const light = new SpotLight(this.color, this.intensity, this.distance, this.angle, this.penumbra, this.decay)\r\n\r\n    const watchProps = ['angle', 'decay', 'distance', 'penumbra']\r\n    watchProps.forEach(p => {\r\n      // @ts-ignore\r\n      watch(() => this[p], (value) => { light[p] = value })\r\n    })\r\n\r\n    this.initLight(light)\r\n  },\r\n  __hmrId: 'SpotLight',\r\n})\r\n","import { ComponentPropsOptions, ComponentPublicInstance, defineComponent, InjectionKey, PropType, watch } from 'vue'\r\nimport { Color, Material, MeshBasicMaterial, MeshLambertMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, PointsMaterial as TPointsMaterial, Texture, ShadowMaterial as TShadowMaterial } from 'three'\r\nimport { MeshInjectionKey, MeshInterface } from '../meshes/Mesh'\r\nimport { bindObjectProp, propsValues } from '../tools'\r\nimport { BasicMaterialPropsInterface, LambertMaterialPropsInterface, MaterialPropsInterface, PhongMaterialPropsInterface, PhysicalMaterialPropsInterface, PointsMaterialPropsInterface, StandardMaterialPropsInterface, ToonMaterialPropsInterface } from './types'\r\n\r\nexport interface MaterialSetupInterface {\r\n  mesh?: MeshInterface\r\n  material?: Material\r\n  createMaterial?(): Material\r\n}\r\n\r\nexport interface MaterialInterface extends MaterialSetupInterface {\r\n  setTexture(texture: Texture | null, key: string): void\r\n}\r\n\r\nexport interface MaterialPublicInterface extends ComponentPublicInstance, MaterialInterface {}\r\n\r\nexport const MaterialInjectionKey: InjectionKey<MaterialPublicInterface> = Symbol('Material')\r\n\r\nconst BaseMaterial = defineComponent({\r\n  emits: ['created'],\r\n  props: {\r\n    color: { type: String, default: '#ffffff' },\r\n    props: { type: Object as PropType<MaterialPropsInterface>, default: () => ({}) },\r\n  },\r\n  inject: {\r\n    mesh: MeshInjectionKey as symbol,\r\n  },\r\n  setup(): MaterialSetupInterface {\r\n    return {}\r\n  },\r\n  provide() {\r\n    return {\r\n      [MaterialInjectionKey as symbol]: this,\r\n    }\r\n  },\r\n  created() {\r\n    if (!this.mesh) {\r\n      console.error('Missing parent Mesh')\r\n      return\r\n    }\r\n\r\n    if (this.createMaterial) {\r\n      const material = this.material = this.createMaterial()\r\n      // @ts-ignore\r\n      watch(() => this.color, (value) => { material.color.set(value) })\r\n      bindObjectProp(this, 'props', material, false, this.setProp)\r\n      this.$emit('created', material)\r\n      this.mesh.setMaterial(material)\r\n    }\r\n  },\r\n  unmounted() {\r\n    this.material?.dispose()\r\n  },\r\n  methods: {\r\n    getMaterialParams() {\r\n      return { ...propsValues(this.$props, ['props']), ...this.props }\r\n    },\r\n    setProp(material: any, key: string, value: any, needsUpdate = false) {\r\n      const dstVal = material[key]\r\n      if (dstVal instanceof Color) dstVal.set(value)\r\n      else material[key] = value\r\n      material.needsUpdate = needsUpdate\r\n    },\r\n    setTexture(texture: Texture | null, key = 'map') {\r\n      this.setProp(this.material, key, texture, true)\r\n    },\r\n  },\r\n  render() {\r\n    return this.$slots.default ? this.$slots.default() : []\r\n  },\r\n  __hmrId: 'Material',\r\n})\r\n\r\nexport default BaseMaterial\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nexport function materialComponent<P extends Readonly<ComponentPropsOptions>>(\r\n  name: string,\r\n  props: P,\r\n  createMaterial: {(opts: any): Material}\r\n) {\r\n  return defineComponent({\r\n    name,\r\n    extends: BaseMaterial,\r\n    props,\r\n    methods: {\r\n      createMaterial() {\r\n        return createMaterial(this.getMaterialParams())\r\n      },\r\n    },\r\n  })\r\n}\r\n\r\n// TODO : proper\r\nexport const BasicMaterial = materialComponent('BasicMaterial', { props: { type: Object as PropType<BasicMaterialPropsInterface>, default: () => ({}) } }, (opts) => new MeshBasicMaterial(opts))\r\nexport const LambertMaterial = materialComponent('LambertMaterial', { props: { type: Object as PropType<LambertMaterialPropsInterface>, default: () => ({}) } }, (opts) => new MeshLambertMaterial(opts))\r\nexport const PhongMaterial = materialComponent('PhongMaterial', { props: { type: Object as PropType<PhongMaterialPropsInterface>, default: () => ({}) } }, (opts) => new MeshPhongMaterial(opts))\r\nexport const PhysicalMaterial = materialComponent('PhysicalMaterial', { props: { type: Object as PropType<PhysicalMaterialPropsInterface>, default: () => ({}) } }, (opts) => new MeshPhysicalMaterial(opts))\r\nexport const PointsMaterial = materialComponent('PointsMaterial', { props: { type: Object as PropType<PointsMaterialPropsInterface>, default: () => ({}) } }, (opts) => new TPointsMaterial(opts))\r\nexport const ShadowMaterial = materialComponent('ShadowMaterial', { color: { type: String, default: '#000000' }, props: { type: Object as PropType<MaterialPropsInterface>, default: () => ({}) } }, (opts) => new TShadowMaterial(opts))\r\nexport const StandardMaterial = materialComponent('StandardMaterial', { props: { type: Object as PropType<StandardMaterialPropsInterface>, default: () => ({}) } }, (opts) => new MeshStandardMaterial(opts))\r\nexport const ToonMaterial = materialComponent('ToonMaterial', { props: { type: Object as PropType<ToonMaterialPropsInterface>, default: () => ({}) } }, (opts) => new MeshToonMaterial(opts))\r\n","import { MeshMatcapMaterial, TextureLoader } from 'three'\r\nimport { propsValues, getMatcapUrl } from '../tools'\r\nimport { materialComponent } from './Material'\r\n\r\nexport default materialComponent(\r\n  'MatcapMaterial',\r\n  {\r\n    src: String,\r\n    name: { type: String, default: '0404E8_0404B5_0404CB_3333FC' },\r\n  },\r\n  (opts) => {\r\n    const src = opts.src ? opts.src : getMatcapUrl(opts.name)\r\n    const params = propsValues(opts, ['src', 'name'])\r\n    params.matcap = new TextureLoader().load(src)\r\n    return new MeshMatcapMaterial(params)\r\n  }\r\n)\r\n","import { ShaderMaterial } from 'three'\r\nimport { materialComponent } from './Material'\r\nimport { propsValues } from '../tools'\r\n\r\nconst defaultVertexShader = `\r\n  varying vec2 vUv;\r\n  void main(){\r\n    vUv = uv;\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\r\n  }\r\n`\r\n\r\nconst defaultFragmentShader = `\r\n  varying vec2 vUv;\r\n  void main() {\r\n    gl_FragColor = vec4(vUv.x, vUv.y, 0., 1.0);\r\n  }\r\n`\r\n\r\nexport default materialComponent(\r\n  'ShaderMaterial',\r\n  {\r\n    props: { type: Object, default: () => ({\r\n      uniforms: {},\r\n      vertexShader: defaultVertexShader,\r\n      fragmentShader: defaultFragmentShader,\r\n    }) },\r\n  },\r\n  (opts) => new ShaderMaterial(propsValues(opts, ['color']))\r\n)\r\n","/**\r\n * ------------------------------------------------------------------------------------------\r\n * Subsurface Scattering shader\r\n * Based on three/examples/jsm/shaders/SubsurfaceScatteringShader.js\r\n * Based on GDC 2011  Approximating Translucency for a Fast, Cheap and Convincing Subsurface Scattering Look\r\n * https://colinbarrebrisebois.com/2011/03/07/gdc-2011-approximating-translucency-for-a-fast-cheap-and-convincing-subsurface-scattering-look/\r\n *------------------------------------------------------------------------------------------\r\n */\r\nimport {\r\n  Color,\r\n  ShaderChunk,\r\n  ShaderLib,\r\n  UniformsUtils,\r\n} from 'three'\r\n\r\nfunction replaceAll(string: string, find: string, replace: string) {\r\n  return string.split(find).join(replace)\r\n}\r\n\r\nconst meshphongFragHead = ShaderChunk.meshphong_frag.slice(0, ShaderChunk.meshphong_frag.indexOf('void main() {'))\r\nconst meshphongFragBody = ShaderChunk.meshphong_frag.slice(ShaderChunk.meshphong_frag.indexOf('void main() {'))\r\n\r\nconst SubsurfaceScatteringShader = {\r\n\r\n  uniforms: UniformsUtils.merge([\r\n    ShaderLib.phong.uniforms,\r\n    {\r\n      thicknessColor: { value: new Color(0xffffff) },\r\n      thicknessDistortion: { value: 0.1 },\r\n      thicknessAmbient: { value: 0.0 },\r\n      thicknessAttenuation: { value: 0.1 },\r\n      thicknessPower: { value: 2.0 },\r\n      thicknessScale: { value: 10.0 },\r\n    },\r\n  ]),\r\n\r\n  vertexShader: `\r\n    #define USE_UV\r\n    ${ShaderChunk.meshphong_vert}\r\n  `,\r\n\r\n  fragmentShader: `\r\n    #define USE_UV\r\n    #define SUBSURFACE\r\n\r\n    ${meshphongFragHead}\r\n\r\n    uniform float thicknessPower;\r\n    uniform float thicknessScale;\r\n    uniform float thicknessDistortion;\r\n    uniform float thicknessAmbient;\r\n    uniform float thicknessAttenuation;\r\n    uniform vec3 thicknessColor;\r\n\r\n    void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in GeometricContext geometry, inout ReflectedLight reflectedLight) {\r\n      #ifdef USE_COLOR\r\n        vec3 thickness = vColor * thicknessColor;\r\n      #else\r\n        vec3 thickness = thicknessColor;\r\n      #endif\r\n      vec3 scatteringHalf = normalize(directLight.direction + (geometry.normal * thicknessDistortion));\r\n      float scatteringDot = pow(saturate(dot(geometry.viewDir, -scatteringHalf)), thicknessPower) * thicknessScale;\r\n      vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * thickness;\r\n      reflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;\r\n    }\r\n  ` + meshphongFragBody.replace(\r\n    '#include <lights_fragment_begin>',\r\n    replaceAll(\r\n      ShaderChunk.lights_fragment_begin,\r\n      'RE_Direct( directLight, geometry, material, reflectedLight );',\r\n      `\r\n        RE_Direct( directLight, geometry, material, reflectedLight );\r\n        #if defined( SUBSURFACE ) && defined( USE_UV )\r\n          RE_Direct_Scattering(directLight, vUv, geometry, reflectedLight);\r\n        #endif\r\n      `\r\n    )\r\n  ),\r\n}\r\n\r\nexport default SubsurfaceScatteringShader\r\n","import { defineComponent, PropType } from 'vue'\r\nimport { Color, ShaderMaterial, UniformsUtils } from 'three'\r\nimport SubsurfaceScatteringShader from './SubsurfaceScatteringShader'\r\nimport Material from './Material'\r\nimport { bindObjectProp } from '../tools'\r\n\r\nexport interface SubSurfaceMaterialUniformsInterface {\r\n  diffuse?: string | number\r\n  thicknessColor?: string | number\r\n  thicknessDistortion?: number\r\n  thicknessAmbient?: number\r\n  thicknessAttenuation?: number\r\n  thicknessPower?: number\r\n  thicknessScale?: number\r\n}\r\n\r\nexport default defineComponent({\r\n  extends: Material,\r\n  props: {\r\n    uniforms: { type: Object as PropType<SubSurfaceMaterialUniformsInterface>, default: () => ({\r\n      diffuse: '#ffffff',\r\n      thicknessColor: '#ffffff',\r\n      thicknessDistortion: 0.4,\r\n      thicknessAmbient: 0.01,\r\n      thicknessAttenuation: 0.7,\r\n      thicknessPower: 2,\r\n      thicknessScale: 4,\r\n    }) },\r\n  },\r\n  methods: {\r\n    createMaterial() {\r\n      const params = SubsurfaceScatteringShader\r\n      const uniforms = UniformsUtils.clone(params.uniforms)\r\n\r\n      bindObjectProp(this, 'uniforms', uniforms, true, (dst: any, key: string, value: any) => {\r\n        const dstVal = dst[key].value\r\n        if (dstVal instanceof Color) dstVal.set(value)\r\n        else dst[key].value = value\r\n      })\r\n\r\n      const material = new ShaderMaterial({\r\n        ...params,\r\n        lights: true,\r\n        ...this.props,\r\n        uniforms,\r\n      })\r\n\r\n      return material\r\n    },\r\n  },\r\n})\r\n","import { defineComponent, PropType, watch } from 'vue'\r\nimport { ShaderMaterial, Texture, TextureLoader } from 'three'\r\nimport { bindObjectProp } from '../tools'\r\nimport { MaterialInjectionKey, MaterialInterface } from './Material'\r\n\r\nexport interface TexureInterface {\r\n  material?: MaterialInterface\r\n  texture?: Texture\r\n}\r\n\r\nexport default defineComponent({\r\n  inject: {\r\n    material: MaterialInjectionKey as symbol,\r\n  },\r\n  props: {\r\n    name: { type: String, default: 'map' },\r\n    uniform: String,\r\n    src: String,\r\n    onLoad: Function as PropType<(t: Texture) => void>,\r\n    onProgress: Function as PropType<(e: ProgressEvent) => void>,\r\n    onError: Function as PropType<(e: ErrorEvent) => void>,\r\n    props: { type: Object, default: () => ({}) },\r\n  },\r\n  setup(): TexureInterface {\r\n    return {}\r\n  },\r\n  created() {\r\n    this.refreshTexture()\r\n    watch(() => this.src, this.refreshTexture)\r\n  },\r\n  unmounted() {\r\n    this.material?.setTexture(null, this.name)\r\n    this.texture?.dispose()\r\n  },\r\n  methods: {\r\n    createTexture() {\r\n      if (!this.src) return undefined\r\n      return new TextureLoader().load(this.src, this.onLoaded, this.onProgress, this.onError)\r\n    },\r\n    initTexture() {\r\n      if (!this.texture) return\r\n\r\n      bindObjectProp(this, 'props', this.texture)\r\n      if (!this.material) return\r\n\r\n      this.material.setTexture(this.texture, this.name)\r\n      if (this.material.material instanceof ShaderMaterial && this.uniform) {\r\n        (this.material.material).uniforms[this.uniform] = { value: this.texture }\r\n      }\r\n    },\r\n    refreshTexture() {\r\n      this.texture?.dispose()\r\n      this.texture = this.createTexture()\r\n      this.initTexture()\r\n    },\r\n    onLoaded(t: Texture) {\r\n      this.onLoad?.(t)\r\n    },\r\n  },\r\n  render() { return [] },\r\n})\r\n","import { defineComponent, PropType, watch } from 'vue'\r\nimport { CubeReflectionMapping, CubeTextureLoader } from 'three'\r\nimport Texture from './Texture'\r\n\r\nexport default defineComponent({\r\n  extends: Texture,\r\n  props: {\r\n    name: { type: String, default: 'envMap' },\r\n    path: { type: String, required: true },\r\n    urls: {\r\n      type: Array as PropType<string[]>,\r\n      default: () => ['px.jpg', 'nx.jpg', 'py.jpg', 'ny.jpg', 'pz.jpg', 'nz.jpg'],\r\n    },\r\n    props: { type: Object, default: () => ({ mapping: CubeReflectionMapping }) },\r\n  },\r\n  created() {\r\n    watch(() => this.path, this.refreshTexture)\r\n    watch(() => this.urls, this.refreshTexture)\r\n  },\r\n  methods: {\r\n    createTexture() {\r\n      return new CubeTextureLoader()\r\n        .setPath(this.path)\r\n        .load(this.urls, this.onLoaded, this.onProgress, this.onError)\r\n    },\r\n  },\r\n})\r\n","import { defineComponent, watch } from 'vue'\r\nimport { VideoTexture } from 'three'\r\nimport Texture from './Texture'\r\n\r\nexport default defineComponent({\r\n  extends: Texture,\r\n  props: {\r\n    videoId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  created() {\r\n    console.log(this.videoId)\r\n\r\n    watch(() => this.videoId, this.refreshTexture)\r\n  },\r\n  methods: {\r\n    createTexture() {\r\n      const video = document.getElementById(this.videoId) as HTMLVideoElement\r\n      return new VideoTexture(video)\r\n    },\r\n  },\r\n})\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/BoxGeometry'\r\n\r\nexport default meshComponent('Box', props, createGeometry)\r\n\r\n// import { defineComponent } from 'vue'\r\n// import Mesh, { meshComponent } from './Mesh'\r\n//\r\n// export default defineComponent({\r\n//   extends: Mesh,\r\n//   props,\r\n//   created() {\r\n//     this.createGeometry()\r\n//     this.addGeometryWatchers(props)\r\n//   },\r\n//   methods: {\r\n//     createGeometry() {\r\n//       this.geometry = createGeometry(this)\r\n//     },\r\n//   },\r\n// })\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/CircleGeometry'\r\n\r\nexport default meshComponent('Circle', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/ConeGeometry'\r\n\r\nexport default meshComponent('Cone', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/CylinderGeometry'\r\n\r\nexport default meshComponent('Cylinder', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/DodecahedronGeometry'\r\n\r\nexport default meshComponent('Dodecahedron', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/IcosahedronGeometry'\r\n\r\nexport default meshComponent('Icosahedron', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/LatheGeometry'\r\n\r\nexport default meshComponent('Lathe', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/OctahedronGeometry'\r\n\r\nexport default meshComponent('Octahedron', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/PlaneGeometry'\r\n\r\nexport default meshComponent('Plane', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/PolyhedronGeometry'\r\n\r\nexport default meshComponent('Polyhedron', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/RingGeometry'\r\n\r\nexport default meshComponent('Ring', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/SphereGeometry'\r\n\r\nexport default meshComponent('Sphere', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/TetrahedronGeometry'\r\n\r\nexport default meshComponent('Tetrahedron', props, createGeometry)\r\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\r\n// @ts-ignore\r\nimport { defineComponent, PropType, watch } from 'vue'\r\nimport { TextGeometry } from 'three/examples/jsm/geometries/TextGeometry.js'\r\nimport { Font, FontLoader } from 'three/examples/jsm/loaders/FontLoader.js'\r\nimport Mesh, { MeshSetupInterface } from './Mesh'\r\n\r\ninterface TextSetupInterface extends MeshSetupInterface {\r\n  geometry?: TextGeometry\r\n  font?: Font\r\n}\r\n\r\nconst props = {\r\n  text: { type: String, required: true, default: 'Text' },\r\n  fontSrc: { type: String, required: true },\r\n  size: { type: Number, default: 80 },\r\n  height: { type: Number, default: 5 },\r\n  // depth: { type: Number, default: 1 },\r\n  curveSegments: { type: Number, default: 12 },\r\n  bevelEnabled: { type: Boolean, default: false },\r\n  bevelThickness: { type: Number, default: 10 },\r\n  bevelSize: { type: Number, default: 8 },\r\n  bevelOffset: { type: Number, default: 0 },\r\n  bevelSegments: { type: Number, default: 5 },\r\n  align: { type: [Boolean, String] as PropType<boolean | string>, default: false },\r\n} as const\r\n\r\nexport default defineComponent({\r\n  extends: Mesh,\r\n  props,\r\n  setup(): TextSetupInterface {\r\n    return {}\r\n  },\r\n  created() {\r\n    if (!this.fontSrc) {\r\n      console.error('Missing required prop: \"font-src\"')\r\n      return\r\n    }\r\n    // if (!this.text) {\r\n    //   console.error('Missing required prop: \"text\"')\r\n    //   return\r\n    // }\r\n\r\n    // add watchers\r\n    const watchProps = [\r\n      'text', 'size', 'height', 'curveSegments',\r\n      'bevelEnabled', 'bevelThickness', 'bevelSize', 'bevelOffset', 'bevelSegments',\r\n      'align',\r\n    ]\r\n    watchProps.forEach(p => {\r\n      // @ts-ignore\r\n      watch(() => this[p], () => {\r\n        if (this.font) this.refreshGeometry()\r\n      })\r\n    })\r\n\r\n    const loader = new FontLoader()\r\n    this.loading = true\r\n    loader.load(this.fontSrc, (font) => {\r\n      this.loading = false\r\n      this.font = font\r\n      this.createGeometry()\r\n      this.initMesh()\r\n    })\r\n  },\r\n  methods: {\r\n    createGeometry() {\r\n      this.geometry = new TextGeometry(this.text, {\r\n        // @ts-ignore\r\n        font: this.font,\r\n        size: this.size,\r\n        height: this.height,\r\n        // depth: this.depth,\r\n        curveSegments: this.curveSegments,\r\n        bevelEnabled: this.bevelEnabled,\r\n        bevelThickness: this.bevelThickness,\r\n        bevelSize: this.bevelSize,\r\n        bevelOffset: this.bevelOffset,\r\n        bevelSegments: this.bevelSegments,\r\n      })\r\n\r\n      if (this.align === 'center') {\r\n        this.geometry.center()\r\n      }\r\n    },\r\n  },\r\n})\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/TorusGeometry'\r\n\r\nexport default meshComponent('Torus', props, createGeometry)\r\n","import { meshComponent } from './Mesh'\r\nimport { props, createGeometry } from '../geometries/TorusKnotGeometry'\r\n\r\nexport default meshComponent('TorusKnot', props, createGeometry)\r\n","import { defineComponent } from 'vue'\r\nimport { TubeGeometry, Vector3 } from 'three'\r\nimport Mesh from './Mesh'\r\nimport { props, createGeometry, updateTubeGeometryPoints } from '../geometries/TubeGeometry'\r\n\r\nexport default defineComponent({\r\n  extends: Mesh,\r\n  props,\r\n  created() {\r\n    this.createGeometry()\r\n    this.addGeometryWatchers(props)\r\n  },\r\n  methods: {\r\n    createGeometry() {\r\n      this.geometry = createGeometry(this)\r\n    },\r\n    // update curve points (without using prop, faster)\r\n    updatePoints(points: Vector3[]) {\r\n      updateTubeGeometryPoints(this.geometry as TubeGeometry, points)\r\n    },\r\n  },\r\n  __hmrId: 'Tube',\r\n})\r\n","import { defineComponent, watch } from 'vue'\r\nimport { DoubleSide, MeshBasicMaterial, PlaneGeometry, Texture, TextureLoader } from 'three'\r\nimport Mesh, { MeshSetupInterface } from './Mesh'\r\n\r\ninterface ImageSetupInterface extends MeshSetupInterface {\r\n  material?: MeshBasicMaterial\r\n  texture?: Texture\r\n}\r\n\r\nexport default defineComponent({\r\n  emits: ['loaded'],\r\n  extends: Mesh,\r\n  props: {\r\n    src: { type: String, required: true },\r\n    width: Number,\r\n    height: Number,\r\n    widthSegments: { type: Number, default: 1 },\r\n    heightSegments: { type: Number, default: 1 },\r\n    keepSize: Boolean,\r\n  },\r\n  setup(): ImageSetupInterface {\r\n    return {}\r\n  },\r\n  created() {\r\n    if (!this.renderer) return\r\n\r\n    this.geometry = new PlaneGeometry(1, 1, this.widthSegments, this.heightSegments)\r\n    this.material = new MeshBasicMaterial({ side: DoubleSide, map: this.loadTexture() })\r\n\r\n    watch(() => this.src, this.refreshTexture);\r\n\r\n    ['width', 'height'].forEach(p => {\r\n      // @ts-ignore\r\n      watch(() => this[p], this.resize)\r\n    })\r\n\r\n    this.resize()\r\n    if (this.keepSize) this.renderer.onResize(this.resize)\r\n  },\r\n  unmounted() {\r\n    this.renderer?.offResize(this.resize)\r\n  },\r\n  methods: {\r\n    loadTexture() {\r\n      return new TextureLoader().load(this.src, this.onLoaded)\r\n    },\r\n    refreshTexture() {\r\n      this.texture?.dispose()\r\n      if (this.material) {\r\n        this.material.map = this.loadTexture()\r\n        this.material.needsUpdate = true\r\n      }\r\n    },\r\n    onLoaded(texture: Texture) {\r\n      this.texture = texture\r\n      this.resize()\r\n      this.$emit('loaded', texture)\r\n    },\r\n    resize() {\r\n      if (!this.renderer || !this.texture) return\r\n      const screen = this.renderer.size\r\n      const iW = this.texture.image.width\r\n      const iH = this.texture.image.height\r\n      const iRatio = iW / iH\r\n      let w = 1, h = 1\r\n      if (this.width && this.height) {\r\n        w = this.width * screen.wWidth / screen.width\r\n        h = this.height * screen.wHeight / screen.height\r\n      } else if (this.width) {\r\n        w = this.width * screen.wWidth / screen.width\r\n        h = w / iRatio\r\n      } else if (this.height) {\r\n        h = this.height * screen.wHeight / screen.height\r\n        w = h * iRatio\r\n      } else {\r\n        if (iRatio > 1) w = h * iRatio\r\n        else h = w / iRatio\r\n      }\r\n      if (this.mesh) {\r\n        this.mesh.scale.x = w\r\n        this.mesh.scale.y = h\r\n      }\r\n    },\r\n  },\r\n  __hmrId: 'Image',\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { InstancedMesh } from 'three'\r\nimport Mesh from './Mesh'\r\nimport { bindProp } from '../tools'\r\n\r\nexport default defineComponent({\r\n  extends: Mesh,\r\n  props: {\r\n    count: { type: Number, required: true },\r\n  },\r\n  methods: {\r\n    initMesh() {\r\n      if (!this.renderer) return\r\n\r\n      if (!this.geometry || !this.material) {\r\n        console.error('Missing geometry and/or material')\r\n        return false\r\n      }\r\n\r\n      this.mesh = new InstancedMesh(this.geometry, this.material, this.count)\r\n      this.mesh.userData.component = this\r\n\r\n      bindProp(this, 'castShadow', this.mesh)\r\n      bindProp(this, 'receiveShadow', this.mesh)\r\n\r\n      if (this.onPointerEnter ||\r\n        this.onPointerOver ||\r\n        this.onPointerMove ||\r\n        this.onPointerLeave ||\r\n        this.onPointerDown ||\r\n        this.onPointerUp ||\r\n        this.onClick) {\r\n        this.renderer.three.addIntersectObject(this.mesh)\r\n      }\r\n\r\n      this.initObject3D(this.mesh)\r\n    },\r\n  },\r\n  __hmrId: 'InstancedMesh',\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { Sprite, SpriteMaterial, Texture, TextureLoader } from 'three'\r\nimport Object3D, { Object3DSetupInterface } from '../core/Object3D'\r\n\r\ninterface SpriteSetupInterface extends Object3DSetupInterface {\r\n  texture?: Texture\r\n  material?: SpriteMaterial\r\n  sprite?: Sprite\r\n}\r\n\r\nexport default defineComponent({\r\n  extends: Object3D,\r\n  emits: ['loaded'],\r\n  props: {\r\n    src: { type: String, required: true },\r\n  },\r\n  setup(): SpriteSetupInterface {\r\n    return {}\r\n  },\r\n  created() {\r\n    this.texture = new TextureLoader().load(this.src, this.onLoaded)\r\n    this.material = new SpriteMaterial({ map: this.texture })\r\n    this.sprite = new Sprite(this.material)\r\n    this.initObject3D(this.sprite)\r\n  },\r\n  unmounted() {\r\n    this.texture?.dispose()\r\n    this.material?.dispose()\r\n  },\r\n  methods: {\r\n    onLoaded() {\r\n      this.updateUV()\r\n      this.$emit('loaded')\r\n    },\r\n    updateUV() {\r\n      if (!this.texture || !this.sprite) return\r\n\r\n      const iWidth = this.texture.image.width\r\n      const iHeight = this.texture.image.height\r\n      const iRatio = iWidth / iHeight\r\n\r\n      let x = 0.5, y = 0.5\r\n      if (iRatio > 1) {\r\n        x = 0.5 * iRatio\r\n      } else {\r\n        y = 0.5 / iRatio\r\n      }\r\n\r\n      const positions = this.sprite.geometry.attributes.position.array as Array<number>\r\n      positions[0] = -x; positions[1] = -y\r\n      positions[5] = x; positions[6] = -y\r\n      positions[10] = x; positions[11] = y\r\n      positions[15] = -x; positions[16] = y\r\n      this.sprite.geometry.attributes.position.needsUpdate = true\r\n    },\r\n  },\r\n  __hmrId: 'Sprite',\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { BufferGeometry, Material, Points } from 'three'\r\nimport Object3D, { Object3DSetupInterface } from '../core/Object3D'\r\nimport { MeshInjectionKey } from './Mesh'\r\n\r\nexport interface PointsSetupInterface extends Object3DSetupInterface {\r\n  mesh?: Points\r\n  points?: Points\r\n  geometry?: BufferGeometry\r\n  material?: Material\r\n}\r\n\r\nexport interface PointsInterface extends PointsSetupInterface {\r\n  setGeometry(geometry: BufferGeometry): void\r\n  setMaterial(material: Material): void\r\n}\r\n\r\n// not really a mesh, but allow us to easily get geometry/material support\r\nexport default defineComponent({\r\n  extends: Object3D,\r\n  setup(): PointsSetupInterface {\r\n    return {}\r\n  },\r\n  provide() {\r\n    return {\r\n      [MeshInjectionKey as symbol]: this,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.mesh = this.points = new Points(this.geometry, this.material)\r\n    this.initObject3D(this.mesh)\r\n  },\r\n  methods: {\r\n    setGeometry(geometry: BufferGeometry) {\r\n      this.geometry = geometry\r\n      if (this.mesh) this.mesh.geometry = geometry\r\n    },\r\n    setMaterial(material: Material) {\r\n      this.material = material\r\n      if (this.mesh) this.mesh.material = material\r\n    },\r\n  },\r\n})\r\n","import { Object3D as TObject3D } from 'three'\r\nimport { defineComponent } from 'vue'\r\nimport Object3D from '../core/Object3D'\r\n\r\nexport default defineComponent({\r\n  extends: Object3D,\r\n  emits: ['before-load', 'load', 'progress', 'error'],\r\n  props: {\r\n    src: { type: String, required: true },\r\n  },\r\n  data() {\r\n    return {\r\n      progress: 0,\r\n    }\r\n  },\r\n  methods: {\r\n    onLoad(model: TObject3D) {\r\n      this.$emit('load', model)\r\n    },\r\n    onProgress(progress: ProgressEvent) {\r\n      this.progress = progress.loaded / progress.total\r\n      this.$emit('progress', progress)\r\n    },\r\n    onError(error: ErrorEvent) {\r\n      this.$emit('error', error)\r\n    },\r\n  },\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'\r\nimport Model from './Model'\r\n\r\nexport default defineComponent({\r\n  extends: Model,\r\n  created() {\r\n    const loader = new GLTFLoader()\r\n    this.$emit('before-load', loader)\r\n    loader.load(this.src, (gltf) => {\r\n      this.onLoad(gltf)\r\n      this.initObject3D(gltf.scene)\r\n    }, this.onProgress, this.onError)\r\n  },\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js'\r\nimport Model from './Model'\r\n\r\nexport default defineComponent({\r\n  extends: Model,\r\n  created() {\r\n    const loader = new FBXLoader()\r\n    this.$emit('before-load', loader)\r\n    loader.load(this.src, (fbx) => {\r\n      this.onLoad(fbx)\r\n      this.initObject3D(fbx)\r\n    }, this.onProgress, this.onError)\r\n  },\r\n})\r\n","import { defineComponent, inject, InjectionKey } from 'vue'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js'\r\nimport { Pass } from 'three/examples/jsm/postprocessing/Pass'\r\nimport { RendererInjectionKey, RendererInterface } from '../core/Renderer'\r\n\r\ninterface EffectComposerSetupInterface {\r\n  renderer?: RendererInterface\r\n  composer?: EffectComposer\r\n}\r\n\r\nexport interface EffectComposerInterface extends EffectComposerSetupInterface {\r\n  addPass(pass: Pass): void\r\n  removePass(pass: Pass): void\r\n}\r\n\r\nexport const ComposerInjectionKey: InjectionKey<EffectComposerInterface> = Symbol('Composer')\r\n\r\nexport default defineComponent({\r\n  setup(): EffectComposerSetupInterface {\r\n    const renderer = inject(RendererInjectionKey)\r\n    return { renderer }\r\n  },\r\n  provide() {\r\n    return {\r\n      [ComposerInjectionKey as symbol]: this,\r\n    }\r\n  },\r\n  created() {\r\n    if (!this.renderer) {\r\n      console.error('Renderer not found')\r\n      return\r\n    }\r\n    const renderer = this.renderer\r\n\r\n    const composer = new EffectComposer(this.renderer.renderer)\r\n    this.composer = composer\r\n    this.renderer.composer = composer\r\n\r\n    // this.renderer.onInit(() => {\r\n    renderer.addListener('init', () => {\r\n      renderer.renderer.autoClear = false\r\n      this.resize()\r\n      renderer.addListener('resize', this.resize)\r\n    })\r\n  },\r\n  unmounted() {\r\n    this.renderer?.removeListener('resize', this.resize)\r\n  },\r\n  methods: {\r\n    addPass(pass: Pass) {\r\n      this.composer?.addPass(pass)\r\n    },\r\n    removePass(pass: Pass) {\r\n      this.composer?.removePass(pass)\r\n    },\r\n    resize() {\r\n      if (this.composer && this.renderer) {\r\n        this.composer.setSize(this.renderer.size.width, this.renderer.size.height)\r\n      }\r\n    },\r\n  },\r\n  render() {\r\n    return this.$slots.default ? this.$slots.default() : []\r\n  },\r\n  __hmrId: 'EffectComposer',\r\n})\r\n","import { Pass } from 'three/examples/jsm/postprocessing/Pass'\r\nimport { defineComponent } from 'vue'\r\nimport { RendererInjectionKey, RendererInterface } from '../core/Renderer'\r\nimport { ComposerInjectionKey, EffectComposerInterface } from './EffectComposer'\r\n\r\nexport interface EffectSetupInterface {\r\n  renderer?: RendererInterface\r\n  composer?: EffectComposerInterface\r\n  pass?: Pass\r\n}\r\n\r\nexport default defineComponent({\r\n  // inject for sub components\r\n  inject: {\r\n    renderer: RendererInjectionKey as symbol,\r\n    composer: ComposerInjectionKey as symbol,\r\n  },\r\n  emits: ['ready'],\r\n  setup(): EffectSetupInterface {\r\n    return {}\r\n  },\r\n  created() {\r\n    if (!this.composer) {\r\n      console.error('Missing parent EffectComposer')\r\n    }\r\n    if (!this.renderer) {\r\n      console.error('Missing parent Renderer')\r\n    }\r\n  },\r\n  unmounted() {\r\n    if (this.pass) {\r\n      this.composer?.removePass(this.pass);\r\n      (this.pass as any).dispose?.()\r\n    }\r\n  },\r\n  methods: {\r\n    initEffectPass(pass: Pass) {\r\n      this.pass = pass\r\n      this.composer?.addPass(pass)\r\n      this.$emit('ready', pass)\r\n    },\r\n  },\r\n  render() {\r\n    return []\r\n  },\r\n  __hmrId: 'EffectPass',\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js'\r\nimport EffectPass from './EffectPass'\r\n\r\nexport default defineComponent({\r\n  extends: EffectPass,\r\n  created() {\r\n    if (!this.renderer) return\r\n\r\n    if (!this.renderer.scene) {\r\n      console.error('Missing Scene')\r\n      return\r\n    }\r\n    if (!this.renderer.camera) {\r\n      console.error('Missing Camera')\r\n      return\r\n    }\r\n    const pass = new RenderPass(this.renderer.scene, this.renderer.camera)\r\n    this.initEffectPass(pass)\r\n  },\r\n  __hmrId: 'RenderPass',\r\n})\r\n","import { defineComponent, watch } from 'vue'\r\nimport { BokehPass } from 'three/examples/jsm/postprocessing/BokehPass.js'\r\nimport EffectPass from './EffectPass'\r\n\r\nconst props = {\r\n  focus: { type: Number, default: 1 },\r\n  aperture: { type: Number, default: 0.025 },\r\n  maxblur: { type: Number, default: 0.01 },\r\n} as const\r\n\r\nexport default defineComponent({\r\n  extends: EffectPass,\r\n  props,\r\n  created() {\r\n    if (!this.renderer) return\r\n\r\n    if (!this.renderer.scene) {\r\n      console.error('Missing Scene')\r\n      return\r\n    }\r\n    if (!this.renderer.camera) {\r\n      console.error('Missing Camera')\r\n      return\r\n    }\r\n\r\n    const params = {\r\n      focus: this.focus,\r\n      aperture: this.aperture,\r\n      maxblur: this.maxblur,\r\n      width: this.renderer.size.width,\r\n      height: this.renderer.size.height,\r\n    }\r\n\r\n    const pass = new BokehPass(this.renderer.scene, this.renderer.camera, params)\r\n\r\n    Object.keys(props).forEach(p => {\r\n      // @ts-ignore\r\n      watch(() => this[p], (value) => { pass.uniforms[p].value = value })\r\n    })\r\n\r\n    this.initEffectPass(pass)\r\n  },\r\n  __hmrId: 'BokehPass',\r\n})\r\n","import { defineComponent, watch } from 'vue'\r\nimport { FilmPass } from 'three/examples/jsm/postprocessing/FilmPass.js'\r\nimport EffectPass from './EffectPass'\r\n\r\nconst props = {\r\n  noiseIntensity: { type: Number, default: 0.5 },\r\n  scanlinesIntensity: { type: Number, default: 0.05 },\r\n  scanlinesCount: { type: Number, default: 4096 },\r\n  grayscale: { type: Number, default: 0 },\r\n} as const\r\n\r\nexport default defineComponent({\r\n  extends: EffectPass,\r\n  props,\r\n  created() {\r\n    const pass = new FilmPass(this.noiseIntensity, this.scanlinesIntensity, this.scanlinesCount, this.grayscale)\r\n\r\n    Object.keys(props).forEach(p => {\r\n      // @ts-ignore\r\n      watch(() => this[p], (value) => { pass.uniforms[p].value = value })\r\n    })\r\n\r\n    this.initEffectPass(pass)\r\n  },\r\n  __hmrId: 'FilmPass',\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js'\r\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader.js'\r\nimport EffectPass from './EffectPass'\r\nimport { SizeInterface } from '../core/useThree'\r\n\r\nexport default defineComponent({\r\n  extends: EffectPass,\r\n  created() {\r\n    const pass = new ShaderPass(FXAAShader)\r\n\r\n    // resize will be first called in renderer init\r\n    this.renderer?.addListener('resize', this.resize)\r\n\r\n    this.initEffectPass(pass)\r\n  },\r\n  unmounted() {\r\n    this.renderer?.removeListener('resize', this.resize)\r\n  },\r\n  methods: {\r\n    resize({ size }: { size: SizeInterface }) {\r\n      if (this.pass) {\r\n        const { resolution } = (this.pass as ShaderPass).material.uniforms\r\n        resolution.value.x = 1 / size.width\r\n        resolution.value.y = 1 / size.height\r\n      }\r\n    },\r\n  },\r\n  __hmrId: 'FXAAPass',\r\n})\r\n","import { defineComponent, watch } from 'vue'\r\nimport { HalftonePass } from 'three/examples/jsm/postprocessing/HalftonePass.js'\r\nimport EffectPass from './EffectPass'\r\n\r\nconst props = {\r\n  shape: { type: Number, default: 1 },\r\n  radius: { type: Number, default: 4 },\r\n  rotateR: { type: Number, default: Math.PI / 12 * 1 },\r\n  rotateG: { type: Number, default: Math.PI / 12 * 2 },\r\n  rotateB: { type: Number, default: Math.PI / 12 * 3 },\r\n  scatter: { type: Number, default: 0 },\r\n} as const\r\n\r\nexport default defineComponent({\r\n  extends: EffectPass,\r\n  props,\r\n  created() {\r\n    if (!this.renderer) return\r\n\r\n    const pass = new HalftonePass(this.renderer.size.width, this.renderer.size.height, {})\r\n\r\n    Object.keys(props).forEach(p => {\r\n      // @ts-ignore\r\n      pass.uniforms[p].value = this[p]\r\n      // @ts-ignore\r\n      watch(() => this[p], (value) => { pass.uniforms[p].value = value })\r\n    })\r\n\r\n    this.initEffectPass(pass)\r\n  },\r\n  __hmrId: 'HalftonePass',\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { SMAAPass } from 'three/examples/jsm/postprocessing/SMAAPass.js'\r\nimport EffectPass from './EffectPass'\r\n\r\nexport default defineComponent({\r\n  extends: EffectPass,\r\n  created() {\r\n    if (!this.renderer) return\r\n\r\n    const pass = new SMAAPass(this.renderer.size.width, this.renderer.size.height)\r\n    this.initEffectPass(pass)\r\n  },\r\n  __hmrId: 'SMAAPass',\r\n})\r\n","import { defineComponent } from 'vue'\r\nimport { SSAOPass } from 'three/examples/jsm/postprocessing/SSAOPass.js'\r\nimport EffectPass from './EffectPass'\r\n\r\nexport default defineComponent({\r\n  extends: EffectPass,\r\n  props: {\r\n    options: {\r\n      type: Object,\r\n      default: () => ({}),\r\n    },\r\n  },\r\n  created() {\r\n    if (!this.renderer) return\r\n\r\n    if (!this.renderer.scene) {\r\n      console.error('Missing Scene')\r\n      return\r\n    }\r\n    if (!this.renderer.camera) {\r\n      console.error('Missing Camera')\r\n      return\r\n    }\r\n\r\n    const pass = new SSAOPass(\r\n      this.renderer.scene,\r\n      this.renderer.camera,\r\n      this.renderer.size.width,\r\n      this.renderer.size.height\r\n    )\r\n\r\n    Object.keys(this.options).forEach(key => {\r\n      // @ts-ignore\r\n      pass[key] = this.options[key]\r\n    })\r\n\r\n    this.initEffectPass(pass)\r\n  },\r\n  __hmrId: 'SSAOPass',\r\n})\r\n","export default {\r\n  uniforms: {},\r\n  vertexShader: `\r\n    varying vec2 vUv;\r\n    void main() {\r\n      vUv = uv;\r\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n    }\r\n  `,\r\n  fragmentShader: `\r\n    varying vec2 vUv;\r\n    void main() {\r\n      gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  `,\r\n}\r\n","// From https://github.com/evanw/glfx.js\r\nimport { Vector2 } from 'three'\r\nimport DefaultShader from './default'\r\n\r\nexport default {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    blurRadius: { value: 0 },\r\n    gradientRadius: { value: 0 },\r\n    start: { value: new Vector2() },\r\n    end: { value: new Vector2() },\r\n    delta: { value: new Vector2() },\r\n    texSize: { value: new Vector2() },\r\n  },\r\n  vertexShader: DefaultShader.vertexShader,\r\n  fragmentShader: `\r\n    uniform sampler2D tDiffuse;\r\n    uniform float blurRadius;\r\n    uniform float gradientRadius;\r\n    uniform vec2 start;\r\n    uniform vec2 end;\r\n    uniform vec2 delta;\r\n    uniform vec2 texSize;\r\n    varying vec2 vUv;\r\n\r\n    float random(vec3 scale, float seed) {\r\n      /* use the fragment position for a different seed per-pixel */\r\n      return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\r\n    }\r\n\r\n    void main() {\r\n      vec4 color = vec4(0.0);\r\n      float total = 0.0;\r\n\r\n      /* randomize the lookup values to hide the fixed number of samples */\r\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\r\n\r\n      vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\r\n      float radius = smoothstep(0.0, 1.0, abs(dot(vUv * texSize - start, normal)) / gradientRadius) * blurRadius;\r\n      for (float t = -30.0; t <= 30.0; t++) {\r\n          float percent = (t + offset - 0.5) / 30.0;\r\n          float weight = 1.0 - abs(percent);\r\n          vec4 texel = texture2D(tDiffuse, vUv + delta / texSize * percent * radius);\r\n          // vec4 texel2 = texture2D(tDiffuse, vUv + vec2(-delta.y, delta.x) / texSize * percent * radius);\r\n\r\n          /* switch to pre-multiplied alpha to correctly blur transparent images */\r\n          texel.rgb *= texel.a;\r\n          // texel2.rgb *= texel2.a;\r\n\r\n          color += texel * weight;\r\n          total += 2.0 * weight;\r\n      }\r\n\r\n      gl_FragColor = color / total;\r\n\r\n      /* switch back from pre-multiplied alpha */\r\n      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\r\n    }\r\n  `,\r\n}\r\n","import { defineComponent, PropType, watch } from 'vue'\r\nimport { Vector2 } from 'three'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js'\r\nimport EffectPass from './EffectPass'\r\nimport TiltShift from '../shaders/TiltShift'\r\nimport { Vector2PropInterface } from '../core/Object3D'\r\nimport { bindProp } from '../tools'\r\n\r\nconst props = {\r\n  blurRadius: { type: Number, default: 10 },\r\n  gradientRadius: { type: Number, default: 100 },\r\n  start: { type: Object as PropType<Vector2PropInterface>, default: () => ({ x: 0, y: 100 }) },\r\n  end: { type: Object as PropType<Vector2PropInterface>, default: () => ({ x: 10, y: 100 }) },\r\n} as const\r\n\r\ninterface TiltShiftPassSetupInterface {\r\n  uniforms1: {[name: string]: { value: any }}\r\n  uniforms2: {[name: string]: { value: any }}\r\n  pass1?: ShaderPass\r\n  pass2?: ShaderPass\r\n}\r\n\r\nexport default defineComponent({\r\n  extends: EffectPass,\r\n  props,\r\n  setup(): TiltShiftPassSetupInterface {\r\n    return { uniforms1: {}, uniforms2: {} }\r\n  },\r\n  created() {\r\n    if (!this.composer) return\r\n\r\n    this.pass1 = new ShaderPass(TiltShift)\r\n    this.pass2 = new ShaderPass(TiltShift)\r\n\r\n    const uniforms1 = this.uniforms1 = this.pass1.uniforms\r\n    const uniforms2 = this.uniforms2 = this.pass2.uniforms\r\n\r\n    // shared uniforms\r\n    uniforms2.blurRadius = uniforms1.blurRadius\r\n    uniforms2.gradientRadius = uniforms1.gradientRadius\r\n    uniforms2.start = uniforms1.start\r\n    uniforms2.end = uniforms1.end\r\n    uniforms2.texSize = uniforms1.texSize\r\n\r\n    bindProp(this, 'blurRadius', uniforms1.blurRadius, 'value')\r\n    bindProp(this, 'gradientRadius', uniforms1.gradientRadius, 'value')\r\n\r\n    this.updateFocusLine();\r\n\r\n    ['start', 'end'].forEach(p => {\r\n      // @ts-ignore\r\n      watch(() => this[p], this.updateFocusLine, { deep: true })\r\n    })\r\n\r\n    this.pass1.setSize = (width: number, height: number) => {\r\n      uniforms1.texSize.value.set(width, height)\r\n    }\r\n\r\n    this.initEffectPass(this.pass1)\r\n    this.composer.addPass(this.pass2)\r\n  },\r\n  unmounted() {\r\n    if (this.composer && this.pass2) this.composer.removePass(this.pass2)\r\n  },\r\n  methods: {\r\n    updateFocusLine() {\r\n      this.uniforms1.start.value.copy(this.start)\r\n      this.uniforms1.end.value.copy(this.end)\r\n      const dv = new Vector2().copy(this.end as Vector2).sub(this.start as Vector2).normalize()\r\n      this.uniforms1.delta.value.copy(dv)\r\n      this.uniforms2.delta.value.set(-dv.y, dv.x)\r\n    },\r\n  },\r\n  __hmrId: 'TiltShiftPass',\r\n})\r\n","import { defineComponent, watch } from 'vue'\r\nimport { Vector2 } from 'three'\r\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass.js'\r\nimport EffectPass from './EffectPass'\r\n\r\nconst props = {\r\n  strength: { type: Number, default: 1.5 },\r\n  radius: { type: Number, default: 0 },\r\n  threshold: { type: Number, default: 0 },\r\n} as const\r\n\r\nexport default defineComponent({\r\n  extends: EffectPass,\r\n  props,\r\n  created() {\r\n    if (!this.renderer) return\r\n\r\n    const size = new Vector2(this.renderer.size.width, this.renderer.size.height)\r\n    const pass = new UnrealBloomPass(size, this.strength, this.radius, this.threshold)\r\n\r\n    Object.keys(props).forEach(p => {\r\n      // @ts-ignore\r\n      watch(() => this[p], (value) => { pass.uniforms[p].value = value })\r\n    })\r\n\r\n    this.initEffectPass(pass)\r\n  },\r\n  __hmrId: 'UnrealBloomPass',\r\n})\r\n","// From https://github.com/evanw/glfx.js\r\nimport { Vector2 } from 'three'\r\nimport DefaultShader from './default'\r\n\r\nexport default {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    center: { value: new Vector2(0.5, 0.5) },\r\n    strength: { value: 0 },\r\n  },\r\n  vertexShader: DefaultShader.vertexShader,\r\n  fragmentShader: `\r\n    uniform sampler2D tDiffuse;\r\n    uniform vec2 center;\r\n    uniform float strength;\r\n    varying vec2 vUv;\r\n\r\n    float random(vec3 scale, float seed) {\r\n      /* use the fragment position for a different seed per-pixel */\r\n      return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\r\n    }\r\n    \r\n    void main() {\r\n      vec4 color = vec4(0.0);\r\n      float total = 0.0;\r\n      vec2 toCenter = center - vUv;\r\n      \r\n      /* randomize the lookup values to hide the fixed number of samples */\r\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\r\n      \r\n      for (float t = 0.0; t <= 40.0; t++) {\r\n        float percent = (t + offset) / 40.0;\r\n        float weight = 4.0 * (percent - percent * percent);\r\n        vec4 texel = texture2D(tDiffuse, vUv + toCenter * percent * strength);\r\n\r\n        /* switch to pre-multiplied alpha to correctly blur transparent images */\r\n        texel.rgb *= texel.a;\r\n\r\n        color += texel * weight;\r\n        total += weight;\r\n      }\r\n\r\n      gl_FragColor = color / total;\r\n\r\n      /* switch back from pre-multiplied alpha */\r\n      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\r\n    }\r\n  `,\r\n}\r\n","import { defineComponent, PropType } from 'vue'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js'\r\nimport EffectPass from './EffectPass'\r\nimport ZoomBlur from '../shaders/ZoomBlur'\r\nimport { Vector2PropInterface } from '../core/Object3D'\r\nimport { bindProp } from '../tools'\r\n\r\nexport default defineComponent({\r\n  extends: EffectPass,\r\n  props: {\r\n    center: { type: Object as PropType<Vector2PropInterface>, default: () => ({ x: 0.5, y: 0.5 }) },\r\n    strength: { type: Number, default: 0.5 },\r\n  },\r\n  created() {\r\n    const pass = new ShaderPass(ZoomBlur)\r\n\r\n    bindProp(this, 'center', pass.uniforms.center, 'value')\r\n    bindProp(this, 'strength', pass.uniforms.strength, 'value')\r\n\r\n    this.initEffectPass(pass)\r\n  },\r\n  __hmrId: 'ZoomBlurPass',\r\n})\r\n","/* eslint-disable @typescript-eslint/no-explicit-any */\r\n/* eslint-disable @typescript-eslint/ban-ts-comment */\r\nimport { App, createApp as _createApp } from 'vue'\r\nimport * as TROIS from './index'\r\n\r\nexport const TroisJSVuePlugin = {\r\n  install(app: App): void {\r\n    const comps = [\r\n      'VideoTexture',\r\n      'Camera',\r\n      'OrthographicCamera',\r\n      'PerspectiveCamera',\r\n      'Raycaster',\r\n      'Renderer',\r\n      'Scene',\r\n      'Group',\r\n\r\n      'CubeCamera',\r\n\r\n      'AmbientLight',\r\n      'DirectionalLight',\r\n      'HemisphereLight',\r\n      'PointLight',\r\n      'RectAreaLight',\r\n      'SpotLight',\r\n\r\n      'BasicMaterial',\r\n      'LambertMaterial',\r\n      'MatcapMaterial',\r\n      'PhongMaterial',\r\n      'PhysicalMaterial',\r\n      'PointsMaterial',\r\n      'ShaderMaterial',\r\n      'StandardMaterial',\r\n      'SubSurfaceMaterial',\r\n      'ToonMaterial',\r\n\r\n      'Texture',\r\n      'CubeTexture',\r\n\r\n      'BufferGeometry',\r\n\r\n      'Mesh',\r\n\r\n      'Box', 'BoxGeometry',\r\n      'Circle', 'CircleGeometry',\r\n      'Cone', 'ConeGeometry',\r\n      'Cylinder', 'CylinderGeometry',\r\n      'Dodecahedron', 'DodecahedronGeometry',\r\n      'Icosahedron', 'IcosahedronGeometry',\r\n      'Lathe', 'LatheGeometry',\r\n      'Octahedron', 'OctahedronGeometry',\r\n      'Plane', 'PlaneGeometry',\r\n      'Polyhedron', 'PolyhedronGeometry',\r\n      'Ring', 'RingGeometry',\r\n      'Sphere', 'SphereGeometry',\r\n      'Tetrahedron', 'TetrahedronGeometry',\r\n      'Text',\r\n      'Torus', 'TorusGeometry',\r\n      'TorusKnot', 'TorusKnotGeometry',\r\n      'Tube', 'TubeGeometry',\r\n\r\n      'Image',\r\n      'InstancedMesh',\r\n      'Points',\r\n      'Sprite',\r\n\r\n      'FbxModel',\r\n      'GltfModel',\r\n\r\n      'BokehPass',\r\n      'EffectComposer',\r\n      'FilmPass',\r\n      'FXAAPass',\r\n      'HalftonePass',\r\n      'RenderPass',\r\n      'SAOPass',\r\n      'SMAAPass',\r\n      'SSAOPass',\r\n      'TiltShiftPass',\r\n      'UnrealBloomPass',\r\n      'ZoomBlurPass',\r\n    ]\r\n\r\n    comps.forEach(comp => {\r\n      // @ts-ignore\r\n      app.component(comp, TROIS[comp])\r\n    })\r\n  },\r\n}\r\n\r\nexport function createApp(params: any): App {\r\n  return _createApp(params).use(TroisJSVuePlugin)\r\n}\r\n","import { Texture, TextureLoader } from 'three'\r\n\r\nexport interface TextureConfigInterface {\r\n  src: string\r\n}\r\n\r\nexport interface TexturesInterface {\r\n  loader: TextureLoader\r\n  count: number\r\n  textures: Texture[],\r\n  loadProgress: number\r\n  loadTextures(images: TextureConfigInterface[], cb: {() : void}): void\r\n  dispose(): void\r\n}\r\n\r\nexport default function useTextures(): TexturesInterface {\r\n  const obj: TexturesInterface = {\r\n    loader: new TextureLoader(),\r\n    count: 0,\r\n    textures: [],\r\n    loadProgress: 0,\r\n    loadTextures,\r\n    dispose,\r\n  }\r\n  return obj\r\n\r\n  function loadTextures(images: TextureConfigInterface[], cb: {() : void}) {\r\n    obj.count = images.length\r\n    obj.textures.splice(0)\r\n    obj.loadProgress = 0\r\n    Promise.all(images.map(loadTexture)).then(cb)\r\n  }\r\n\r\n  function loadTexture(img: TextureConfigInterface, index: number) {\r\n    return new Promise(resolve => {\r\n      obj.loader.load(\r\n        img.src,\r\n        texture => {\r\n          obj.loadProgress += 1 / obj.count\r\n          obj.textures[index] = texture\r\n          resolve(texture)\r\n        }\r\n      )\r\n    })\r\n  }\r\n\r\n  function dispose() {\r\n    obj.textures.forEach(t => t.dispose())\r\n  }\r\n}\r\n"],"names":["applyObjectProps","dst","options","setter","key","value","bindObjectProp","src","prop","apply","r","toRef","watch","bindObjectProps","ref","setFromProp","o","bindProps","props","bindProp","srcProp","dstProp","_dstProp","propsValues","exclude","values","lerp","value1","value2","amount","limit","val","min","max","MATCAP_ROOT","DEFAULT_MATCAP","getMatcapUrl","hash","format","fileName","getMatcapFormatString","useRaycaster","camera","resetPosition","Vector3","raycaster","Raycaster","position","plane","Plane","coords","objects","recursive","usePointer","domElement","intersectObjects","intersectRecursive","touch","resetOnEnd","onEnter","onMove","onLeave","onClick","onIntersectEnter","onIntersectOver","onIntersectMove","onIntersectLeave","onIntersectClick","Vector2","positionN","positionV3","obj","addListeners","removeListeners","intersect","reset","updatePosition","event","x","y","rect","_intersectObjects","getIntersectObjects","intersects","offObjects","iMeshes","_a","_b","_c","object","component","getComponent","InstancedMesh","overEvent","enterEvent","moveEvent","leaveEvent","pointerEnter","pointerMove","pointerClick","pointerLeave","parent","useThree","params","config","size","beforeRenderCallbacks","renderer","createRenderer","init","dispose","render","renderC","setSize","addIntersectObject","removeIntersectObject","WebGLRenderer","onResize","initPointer","cameraCtrl","OrbitControls","onBeforeRender","pointerConf","pointer","cb","c","i","elt","width","height","pCamera","oCamera","wsize","getCameraSize","vFOV","h","RendererInjectionKey","defineComponent","attrs","initCallbacks","mountedCallbacks","afterRenderCallbacks","resizeCallbacks","canvas","matches","three","watchEffect","renderFn","scene","composer","e","type","callbacks","index","time","p$1","cameraSetProp","updateProjectionMatrix","OrthographicCamera","Camera","inject","p","PerspectiveCamera","v","SceneInjectionKey","Scene","provide","setBackground","Color","Texture","pointerProps","o$1","o3d","instance","getCurrentInstance","Group","Object3D","emptyCallBack","CubeCamera","rendererC","cubeRT","WebGLCubeRenderTarget","RGBAFormat","LinearMipmapLinearFilter","cubeCamera","updateRT","m","onUnmounted","MeshInjectionKey","Mesh","mesh","TMesh","geometry","material","oldGeo","meshComponent","name","createGeometry","Geometry","bufferAttributes","BufferGeometry","attribute","bufferAttribute","BufferAttribute","geometryComponent","comp","BoxGeometry","CircleGeometry","ConeGeometry","CylinderGeometry","DodecahedronGeometry","ExtrudeGeometry","IcosahedronGeometry","LatheGeometry","OctahedronGeometry","PlaneGeometry","PolyhedronGeometry","RingGeometry","SphereGeometry","ShapeGeometry","TetrahedronGeometry","TorusGeometry","TorusKnotGeometry","Curve","curve","CatmullRomCurve3","TubeGeometry","points","updateTubeGeometryPoints","tube","radialSegments","radius","tubularSegments","closed","frames","pAttribute","nAttribute","normal","P","updateSegment","N","B","j","sin","cos","n","SpotLight","DirectionalLight","light","AmbientLight","Light","HemisphereLight","PointLight","RectAreaLight","RectAreaLightUniformsLib","lightHelper","RectAreaLightHelper","MaterialInjectionKey","BaseMaterial","needsUpdate","dstVal","texture","materialComponent","createMaterial","BasicMaterial","opts","MeshBasicMaterial","LambertMaterial","MeshLambertMaterial","PhongMaterial","MeshPhongMaterial","PhysicalMaterial","MeshPhysicalMaterial","PointsMaterial","TPointsMaterial","ShadowMaterial","TShadowMaterial","StandardMaterial","MeshStandardMaterial","ToonMaterial","MeshToonMaterial","MatcapMaterial","TextureLoader","MeshMatcapMaterial","defaultVertexShader","defaultFragmentShader","ShaderMaterial","replaceAll","string","find","replace","meshphongFragHead","ShaderChunk","meshphongFragBody","SubsurfaceScatteringShader","UniformsUtils","ShaderLib","SubSurfaceMaterial","Material","uniforms","d","t","CubeTexture","CubeReflectionMapping","CubeTextureLoader","VideoTexture","video","Box","Circle","Cone","Cylinder","Dodecahedron","Icosahedron","Lathe","Octahedron","Polyhedron","Ring","Sphere","Tetrahedron","loader","FontLoader","font","TextGeometry","Torus","TorusKnot","Tube","DoubleSide","screen","iW","iH","iRatio","w","Sprite","SpriteMaterial","iWidth","iHeight","positions","Points","model","progress","error","GLTF","Model","GLTFLoader","gltf","FBX","FBXLoader","fbx","ComposerInjectionKey","EffectComposer","pass","s$1","RenderPass","EffectPass","BokehPass","FilmPass","FXAAPass","ShaderPass","FXAAShader","resolution","HalftonePass","SMAAPass","SSAOPass","t$1","r$1","DefaultShader","TiltShift","uniforms1","uniforms2","dv","UnrealBloomPass","ZoomBlur","TroisJSVuePlugin","app","TROIS","createApp","_createApp","useTextures","loadTextures","images","loadTexture","img","resolve"],"mappings":"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"}